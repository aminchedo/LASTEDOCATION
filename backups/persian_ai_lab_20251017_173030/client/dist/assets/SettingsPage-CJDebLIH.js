import{c as q,p as he,j as e,b as v,f as w,S as V,d as g,C as G,B as n,q as ae,r as re,k as ue,s as se,R as te,z as i,t as $,F as pe,H as B,D as ve,a as le,v as ge,u as fe,h as be,w as Q,x as je,X as Y,y as H,G as y,J as Ne}from"./index-Br5p3c61.js";import{b as d}from"./react-vendor-CHIk2tMd.js";import{B as J}from"./badge-DlDO3Hl1.js";import"./auth.service-DTA6mi50.js";import{C as E}from"./circle-check-big-BW1H2Pf2.js";import{u as ye}from"./useDetectedModels-Gnq-hAP8.js";import{M as oe}from"./mic-Dvnds8DU.js";import{C as we}from"./calendar-BTWnThVv.js";import{S as ke}from"./sparkles-BNoBMool.js";import{C as Ce}from"./code-goAM4Hpk.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=q("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=q("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=q("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);function Z(t){try{return new URL(t).protocol.startsWith("http")?{isValid:!0}:{isValid:!1,error:"URL must start with http:// or https://"}}catch{return{isValid:!1,error:"Invalid URL format"}}}function Te(t){return!t||t.length<8?"****":t.slice(0,4)+"****"+t.slice(-4)}async function Ue(t){try{return await navigator.clipboard.writeText(t),!0}catch{return!1}}async function ze(t=3e4){await new Promise(p=>setTimeout(p,t)),await navigator.clipboard.writeText("")}async function Me(t){try{const p={};t.apiKey&&(p.Authorization=`Bearer ${t.apiKey}`);const r=await fetch(`${t.baseUrl}/health`,{headers:p});return r.ok?{success:!0}:{success:!1,error:`Server returned status ${r.status}`}}catch(p){return{success:!1,error:p.message||"Connection failed"}}}function Pe(){return[{value:void 0,label:"Auto-detect"},{value:"openai",label:"OpenAI"},{value:"anthropic",label:"Anthropic"},{value:"custom",label:"Custom"}]}function _e(t){return t.trim()}function Fe(t){return t?.api?.baseUrl&&t?.api?.key}function Re(){const{settings:t,updateCustomApi:p,resetCustomApi:r}=he(),[o,k]=d.useState({enabled:!1,baseUrl:"",apiKey:"",modelName:"",modelType:void 0}),[x,C]=d.useState(!1),[z,j]=d.useState(!1),[_,M]=d.useState(!1),[P,s]=d.useState(null),[S,N]=d.useState(!1);d.useEffect(()=>{t.customApi&&k(t.customApi)},[t.customApi]),d.useEffect(()=>{o.baseUrl.trim()},[o]);const f=(c,m)=>{k(U=>({...U,[c]:m})),c==="baseUrl"&&s(null)},h=()=>{if(o.baseUrl.trim()){const c=Z(o.baseUrl);c.isValid?s(null):s(c.error||"Invalid URL")}},T=async()=>{if(!o.baseUrl.trim()){i.error("لطفا ابتدا API Base URL را وارد کنید");return}j(!0);try{const c=await Me(o);c.success?i.success("اتصال با موفقیت برقرار شد"):i.error(`خطا در اتصال: ${c.error}`)}catch(c){i.error(`خطا در تست اتصال: ${c.message}`)}finally{j(!1)}},F=async()=>{if(!o.baseUrl.trim()){i.error("لطفا API Base URL را وارد کنید");return}const c=Z(o.baseUrl);if(!c.isValid){s(c.error||"Invalid URL"),i.error("لطفا یک URL معتبر وارد کنید");return}M(!0);try{const m={enabled:!0,baseUrl:o.baseUrl.trim(),apiKey:o.apiKey?_e(o.apiKey):void 0,modelName:o.modelName?.trim()||void 0,modelType:o.modelType};p(m),i.success("تنظیمات API سفارشی ذخیره شد")}catch(m){i.error(`خطا در ذخیره تنظیمات: ${m.message}`)}finally{M(!1)}},R=()=>{k({enabled:!1,baseUrl:"",apiKey:"",modelName:"",modelType:void 0}),r(),s(null),i.success("تنظیمات به حالت پیش‌فرض بازگردانده شد")},D=async()=>{if(!o.apiKey)return;await Ue(o.apiKey)?(N(!0),ze(3e3),i.success("کلید API کپی شد (خودکار پاک می‌شود)"),setTimeout(()=>N(!1),1e3)):i.error("خطا در کپی کردن کلید")},K=Fe(o),O=JSON.stringify(o)!==JSON.stringify(t.customApi);return e.jsxs(v,{variant:"elevated",className:"w-full",children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500/10 to-purple-500/10 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-[color:var(--c-primary)]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"API سفارشی"}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:"پیکربندی API خارجی برای چت، تبدیل گفتار به متن و تبدیل متن به گفتار"})]})]})}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-[color:var(--c-text)]",children:[e.jsx(Se,{className:"w-4 h-4 inline ml-1"}),"API Base URL *"]}),e.jsx("input",{type:"url",value:o.baseUrl,onChange:c=>f("baseUrl",c.target.value),onBlur:h,placeholder:"https://api.example.com",className:`w-full px-4 py-2 rounded-lg border ${P?"border-red-500":"border-[color:var(--c-border)]"} bg-[color:var(--c-bg)] text-[color:var(--c-text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]`,dir:"ltr"}),P&&e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),P]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-[color:var(--c-text)]",children:[e.jsx(ce,{className:"w-4 h-4 inline ml-1"}),"کلید API (اختیاری)"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:o.apiKey,onChange:c=>f("apiKey",c.target.value),placeholder:"کلید API خود را وارد کنید",className:"w-full px-4 py-2 pr-20 rounded-lg border border-[color:var(--c-border)] bg-[color:var(--c-bg)] text-[color:var(--c-text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]"}),e.jsxs("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",icon:x?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"}),onClick:()=>C(!x),"aria-label":x?"مخفی کردن کلید":"نمایش کلید"}),o.apiKey&&e.jsx(n,{variant:"ghost",size:"sm",icon:S?e.jsx(E,{className:"w-4 h-4 text-green-600"}):e.jsx(ue,{className:"w-4 h-4"}),onClick:D,"aria-label":"کپی کردن کلید"})]})]}),o.apiKey&&e.jsxs("p",{className:"text-xs text-[color:var(--c-text-muted)]",children:["نمایش: ",Te(o.apiKey)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)]",children:"نام مدل (اختیاری)"}),e.jsx("input",{type:"text",value:o.modelName||"",onChange:c=>f("modelName",c.target.value),placeholder:"نام مدل مورد نظر",className:"w-full px-4 py-2 rounded-lg border border-[color:var(--c-border)] bg-[color:var(--c-bg)] text-[color:var(--c-text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)]",children:"نوع مدل (اختیاری)"}),e.jsx("select",{value:o.modelType||"",onChange:c=>f("modelType",c.target.value||void 0),className:"w-full px-4 py-2 rounded-lg border border-[color:var(--c-border)] bg-[color:var(--c-bg)] text-[color:var(--c-text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]",children:Pe().map(c=>e.jsx("option",{value:c.value||"",children:c.label},c.value||"auto"))})]}),K&&e.jsxs("div",{className:"p-3 rounded-lg bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-sm flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"API سفارشی فعال است - درخواست‌ها به ",o.baseUrl," ارسال می‌شوند"]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-[color:var(--c-border)]",children:[e.jsx(n,{variant:"secondary",icon:e.jsx(Ae,{className:"w-4 h-4"}),onClick:T,disabled:z||!o.baseUrl.trim(),loading:z,children:"تست اتصال"}),e.jsx(n,{variant:"primary",icon:e.jsx(se,{className:"w-4 h-4"}),onClick:F,disabled:_||!O||!o.baseUrl.trim(),loading:_,children:"ذخیره"}),e.jsx(n,{variant:"ghost",icon:e.jsx(te,{className:"w-4 h-4"}),onClick:R,disabled:!t.customApi,children:"بازگردانی به پیش‌فرض"})]}),e.jsxs("div",{className:"text-xs text-[color:var(--c-text-muted)] space-y-1",children:[e.jsx("p",{children:"• API Base URL باید با http:// یا https:// شروع شود"}),e.jsx("p",{children:"• کلید API اختیاری است اما برای احراز هویت توصیه می‌شود"}),e.jsx("p",{children:"• نام مدل و نوع مدل برای پیکربندی دقیق‌تر اختیاری هستند"}),e.jsx("p",{children:"• تست اتصال سلامت سرور را بررسی می‌کند"})]})]})]})}const De={model:le,tts:oe,dataset:ve,unknown:B},Le={model:"مدل",tts:"صدا (TTS)",dataset:"داده",unknown:"نامشخص"},ee={pytorch:"bg-orange-500/10 text-orange-600 border-orange-200",onnx:"bg-blue-500/10 text-blue-600 border-blue-200",safetensors:"bg-green-500/10 text-green-600 border-green-200",tensorflow:"bg-purple-500/10 text-purple-600 border-purple-200",gguf:"bg-cyan-500/10 text-cyan-600 border-cyan-200",ggml:"bg-teal-500/10 text-teal-600 border-teal-200",bin:"bg-gray-500/10 text-gray-600 border-gray-200",unknown:"bg-slate-500/10 text-slate-600 border-slate-200"};function $e({className:t}){const{models:p,statistics:r,loading:o,error:k,scannedDirectories:x,configuration:C,refetch:z}=ye(),[j,_]=d.useState(null),M=s=>{if(s===0)return"0 B";const S=1024,N=["B","KB","MB","GB","TB"],f=Math.floor(Math.log(s)/Math.log(S));return parseFloat((s/Math.pow(S,f)).toFixed(2))+" "+N[f]},P=s=>{try{return new Date(s).toLocaleDateString("fa-IR")}catch{return s}};return o?e.jsx(v,{className:`${t} animate-pulse`,children:e.jsx(g,{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex items-center gap-3 text-[color:var(--c-muted)]",children:[e.jsx($,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"در حال اسکن مدل‌ها..."})]})})}):k?e.jsx(v,{className:`${t} border-[color:var(--c-error)]/20`,children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-[color:var(--c-error)] mb-4",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"خطا در اسکن مدل‌ها"})]}),e.jsx("p",{className:"text-sm text-[color:var(--c-muted)] mb-4",children:k}),e.jsx(n,{variant:"outline",size:"sm",icon:e.jsx($,{className:"w-4 h-4"}),onClick:z,children:"تلاش مجدد"})]})}):e.jsxs("div",{className:t,children:[r&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-[color:var(--c-surface)] rounded-lg p-3 border border-[color:var(--c-border)]",children:[e.jsx("div",{className:"text-lg font-bold text-[color:var(--c-primary)]",children:r.total_models}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:"کل مدل‌ها"})]}),e.jsxs("div",{className:"bg-[color:var(--c-surface)] rounded-lg p-3 border border-[color:var(--c-border)]",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:r.by_type.model}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:"مدل‌های AI"})]}),e.jsxs("div",{className:"bg-[color:var(--c-surface)] rounded-lg p-3 border border-[color:var(--c-border)]",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:r.by_type.tts}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:"مدل‌های TTS"})]}),e.jsxs("div",{className:"bg-[color:var(--c-surface)] rounded-lg p-3 border border-[color:var(--c-border)]",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600",children:r.by_type.dataset}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:"دیتاست‌ها"})]})]}),C&&x.length>0&&e.jsxs("div",{className:"bg-[color:var(--c-border)]/10 rounded-lg p-4 mb-6 border border-[color:var(--c-border)]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-[color:var(--c-primary)]"}),e.jsxs("span",{className:"text-sm font-medium text-[color:var(--c-text)]",children:[x.length," پوشه اسکن شده"]})]}),e.jsx(n,{variant:"ghost",size:"sm",icon:e.jsx($,{className:"w-4 h-4"}),onClick:z,className:"hover:scale-105 transition-transform",children:"بروزرسانی"})]}),e.jsxs("div",{className:"text-xs text-[color:var(--c-muted)] space-y-1",children:[e.jsxs("div",{children:["عمق اسکن: ",C.scanDepth," سطح"]}),e.jsxs("div",{children:["اسکن خودکار: ",C.autoScan?"فعال":"غیرفعال"]}),x.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"cursor-pointer hover:text-[color:var(--c-primary)] transition-colors",children:"مشاهده پوشه‌ها"}),e.jsx("div",{className:"mt-2 space-y-1 mr-4",children:x.map((s,S)=>e.jsx("div",{className:"text-xs font-mono bg-[color:var(--c-surface)]/50 px-2 py-1 rounded",children:s},S))})]})]})]}),e.jsx("div",{className:"space-y-3",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-12 h-12 mx-auto text-[color:var(--c-muted)] mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium text-[color:var(--c-text)] mb-2",children:"هیچ مدلی پیدا نشد"}),e.jsx("p",{className:"text-sm text-[color:var(--c-muted)] max-w-md mx-auto",children:"در پوشه‌های تعریف شده مدلی شناسایی نشد. پوشه‌های جدید اضافه کنید یا تنظیمات اسکن را بررسی کنید."})]}):p.map(s=>{const S=De[s.type],N=j===s.id;return e.jsx(v,{className:"group hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>_(N?null:s.id),children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s.type==="model"?"bg-blue-500/10":s.type==="tts"?"bg-green-500/10":s.type==="dataset"?"bg-orange-500/10":"bg-gray-500/10"}`,children:e.jsx(S,{className:`w-5 h-5 ${s.type==="model"?"text-blue-600":s.type==="tts"?"text-green-600":s.type==="dataset"?"text-orange-600":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-[color:var(--c-text)] truncate",children:s.name}),e.jsx(J,{variant:"secondary",className:"text-xs px-2 py-1",children:Le[s.type]}),e.jsx(J,{variant:"outline",className:`text-xs px-2 py-1 ${ee[s.modelFormat]||ee.unknown}`,children:s.modelFormat.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-[color:var(--c-muted)]",children:[e.jsx("span",{children:M(s.size)}),e.jsxs("span",{children:[s.files.length," فایل"]}),s.lastModified&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),e.jsx("span",{children:P(s.lastModified)})]})]}),s.description&&e.jsx("p",{className:"text-xs text-[color:var(--c-muted)] mt-2 line-clamp-2",children:s.description}),N&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-[color:var(--c-border)] space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-[color:var(--c-text)] mb-1",children:"مسیر:"}),e.jsx("div",{className:"text-xs font-mono bg-[color:var(--c-surface)]/50 px-2 py-1 rounded break-all",children:s.path})]}),s.architecture&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-[color:var(--c-text)] mb-1",children:"معماری:"}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:s.architecture})]}),s.language&&s.language.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-[color:var(--c-text)] mb-1",children:"زبان‌ها:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.language.map((f,h)=>e.jsx(J,{variant:"outline",className:"text-xs",children:f},h))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-[color:var(--c-text)] mb-1",children:"فایل‌ها:"}),e.jsxs("div",{className:"text-xs text-[color:var(--c-muted)] space-y-1",children:[s.files.slice(0,10).map((f,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{children:f})]},h)),s.files.length>10&&e.jsxs("div",{className:"text-[color:var(--c-muted)] italic",children:["و ",s.files.length-10," فایل دیگر..."]})]})]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(E,{className:"w-5 h-5 text-green-600"})})]})})},s.id)})})]})}function Xe(){const{settings:t,updateSettings:p}=fe(),[r,o]=d.useState(t),[k,x]=d.useState(!1),[C,z]=d.useState(!1),[j,_]=d.useState(()=>{const a=localStorage.getItem("app_settings");return a&&JSON.parse(a).huggingfaceToken||""}),[M,P]=d.useState(()=>{const a=localStorage.getItem("app_settings");return a&&JSON.parse(a).huggingfaceCustomUrl||"https://huggingface.co"}),[s,S]=d.useState(()=>{const a=localStorage.getItem("app_settings");return a&&JSON.parse(a).huggingfaceAutoDownload||!1}),[N,f]=d.useState(()=>{const a=localStorage.getItem("app_settings");return a&&JSON.parse(a).huggingfaceMaxConcurrent||2}),[h,T]=d.useState("idle"),[F,R]=d.useState(null),[D,K]=d.useState(()=>{const a=localStorage.getItem("app_settings");return a?JSON.parse(a).customModels||[]:[]}),[O,c]=d.useState(!1),[m,U]=d.useState({name:"",repoId:"",type:"model",url:"",description:""}),L=(a,l)=>{o(u=>({...u,[a]:l})),x(!0)},b=(a,l,u)=>{o(I=>{const A={...I};return a==="api"?A.api={...I.api,[l]:u}:a==="voice"?A.voice={...I.voice,[l]:u}:a==="models"?A.models={...I.models,[l]:u}:a==="training"&&(A.training={...I.training||{},[l]:u}),A}),x(!0)},ie=async()=>{if(!j||!j.startsWith("hf_")){i.error("توکن نامعتبر است. توکن باید با hf_ شروع شود"),T("invalid");return}T("validating");try{const a=await fetch("https://huggingface.co/api/whoami",{headers:{Authorization:`Bearer ${j}`}});if(a.ok){const l=await a.json();T("valid"),R({username:l.name,type:l.type}),i.success(`توکن معتبر است! کاربر: ${l.name}`)}else T("invalid"),R(null),i.error("توکن نامعتبر است")}catch(a){T("invalid"),R(null),i.error("خطا در اعتبارسنجی توکن"),console.error("Token validation error:",a)}},ne=()=>{const l={...JSON.parse(localStorage.getItem("app_settings")||"{}"),huggingfaceToken:j,huggingfaceCustomUrl:M,huggingfaceAutoDownload:s,huggingfaceMaxConcurrent:N,customModels:D};localStorage.setItem("app_settings",JSON.stringify(l)),fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(u=>console.error("Failed to save to backend:",u)),i.success("تنظیمات HuggingFace ذخیره شد")},de=()=>{if(!m.name||!m.repoId||!m.url){i.error("لطفا تمام فیلدهای الزامی را پر کنید");return}const a={...m,id:`custom-${Date.now()}`};K(l=>[...l,a]),U({name:"",repoId:"",type:"model",url:"",description:""}),c(!1),i.success("مدل سفارشی اضافه شد")},xe=async a=>{try{return(await fetch(a,{method:"HEAD"})).ok?(i.success("URL معتبر است"),!0):(i.error("URL قابل دسترسی نیست"),!1)}catch{return i.error("خطا در اعتبارسنجی URL"),!1}},W=()=>{p(r),ne(),x(!1),r.api.baseUrl!==t.api.baseUrl||(r.api.key,t.api.key),i.success("تنظیمات با موفقیت ذخیره شد")},X=()=>{window.confirm("آیا مطمئن هستید که می‌خواهید تغییرات را لغو کنید؟")&&(o(t),x(!1),i.success("تغییرات لغو شد"))};return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 max-w-5xl space-y-6 relative",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 right-10 w-72 h-72 bg-[color:var(--c-primary)]/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 left-10 w-96 h-96 bg-[color:var(--c-primary)]/3 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1.5s"}})]}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[color:var(--c-primary)] to-[color:var(--c-primary)]/60 rounded-2xl blur-lg opacity-40"}),e.jsx("div",{className:"relative w-14 h-14 rounded-2xl bg-gradient-to-br from-[color:var(--c-primary)] to-[color:var(--c-primary)]/80 flex items-center justify-center shadow-xl",children:e.jsx(V,{className:"w-7 h-7 text-white"})})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-[color:var(--c-text)] flex items-center gap-2",children:["تنظیمات",k&&e.jsx(ke,{className:"w-5 h-5 text-[color:var(--c-primary)] animate-pulse"})]}),e.jsx("p",{className:"text-sm text-[color:var(--c-muted)] mt-1.5",children:"برنامه را طبق نیاز خود سفارشی کنید"})]})]}),k&&e.jsxs("div",{className:"flex items-center gap-2 animate-[fadeSlideUp_.3s_ease-out_both]",children:[e.jsx(n,{variant:"ghost",size:"sm",icon:e.jsx(te,{className:"w-5 h-5"}),onClick:X,className:"hover:bg-[color:var(--c-error)]/10 hover:text-[color:var(--c-error)] transition-all duration-200",children:e.jsx("span",{className:"hidden sm:inline",children:"لغو"})}),e.jsx(n,{variant:"primary",size:"sm",icon:e.jsx(se,{className:"w-5 h-5"}),onClick:W,className:"shadow-lg hover:shadow-xl transition-all duration-200",children:"ذخیره تغییرات"})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[color:var(--c-primary)]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[color:var(--c-primary)]/10 flex items-center justify-center",children:e.jsx(V,{className:"w-5 h-5 text-[color:var(--c-primary)]"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"عمومی"})]})}),e.jsx(g,{className:"space-y-6 relative",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"font-size-slider",className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"اندازه فونت پایه"}),e.jsx("div",{className:"relative",children:e.jsx("input",{id:"font-size-slider",type:"range",min:"12",max:"20",value:r.fontSize,onChange:a=>L("fontSize",parseInt(a.target.value)),className:"w-full h-3 bg-gradient-to-r from-[color:var(--c-border)] to-[color:var(--c-primary)]/20 rounded-lg appearance-none cursor-pointer accent-[color:var(--c-primary)] shadow-inner",style:{background:`linear-gradient(to right, var(--c-primary) 0%, var(--c-primary) ${(r.fontSize-12)/8*100}%, var(--c-border) ${(r.fontSize-12)/8*100}%, var(--c-border) 100%)`},"aria-valuemin":12,"aria-valuemax":20,"aria-valuenow":r.fontSize,"aria-label":"اندازه فونت"})}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-[color:var(--c-muted)] mt-3",children:[e.jsx("span",{className:"px-2 py-1 rounded-md bg-[color:var(--c-border)]/30",children:"12px"}),e.jsxs("span",{className:"px-3 py-1.5 rounded-lg bg-[color:var(--c-primary)]/10 text-[color:var(--c-primary)] font-bold",children:[r.fontSize,"px"]}),e.jsx("span",{className:"px-2 py-1 rounded-md bg-[color:var(--c-border)]/30",children:"20px"})]})]})})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/10 flex items-center justify-center",children:e.jsx(Ie,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"ظاهر"})]})}),e.jsxs(g,{className:"space-y-6 relative",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"تم"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(a=>e.jsx(n,{variant:r.theme===a?"primary":"outline",size:"sm",onClick:()=>L("theme",a),className:`min-h-[3rem] transition-all duration-200 ${r.theme===a?"shadow-lg scale-105":"hover:scale-105"}`,children:a==="light"?"☀️ روشن":a==="dark"?"🌙 تاریک":"🔄 خودکار"},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"جهت"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["rtl","ltr"].map(a=>e.jsx(n,{variant:r.direction===a?"primary":"outline",size:"sm",onClick:()=>L("direction",a),className:`min-h-[3rem] transition-all duration-200 ${r.direction===a?"shadow-lg scale-105":"hover:scale-105"}`,children:a==="rtl"?"← راست به چپ":"چپ به راست →"},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"رنگ اصلی"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3",children:be.theme.availableAccents.map(a=>e.jsxs("button",{className:`relative h-16 rounded-2xl border-2 transition-all duration-300 group/color ${r.accentColor===a.value?"border-[color:var(--c-text)] scale-110 shadow-[0_8px_16px_rgba(0,0,0,0.1)]":"border-transparent hover:scale-110 hover:shadow-[0_4px_12px_rgba(0,0,0,0.1)]"}`,style:{backgroundColor:a.value},onClick:()=>L("accentColor",a.value),title:a.name,"aria-label":a.name,"aria-pressed":r.accentColor===a.value,children:[r.accentColor===a.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-white shadow-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"✓"})})}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 opacity-0 group-hover/color:opacity-100 transition-opacity duration-200 whitespace-nowrap text-xs font-medium text-[color:var(--c-text)] bg-[color:var(--c-surface)] px-2 py-1 rounded-md shadow-lg",children:a.name})]},a.value))})]})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center",children:e.jsx(le,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"مدل هوش مصنوعی"})]})}),e.jsx(g,{className:"space-y-6 relative",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"مدل"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:["gpt-4","gpt-3.5-turbo","claude-3"].map(a=>e.jsx(n,{variant:r.aiModel===a?"primary":"outline",size:"sm",onClick:()=>L("aiModel",a),className:`min-h-[3.5rem] transition-all duration-200 ${r.aiModel===a?"shadow-lg scale-105":"hover:scale-105"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"font-semibold",children:a}),e.jsx("span",{className:"text-xs opacity-70",children:a==="gpt-4"?"قدرتمند":a==="gpt-3.5-turbo"?"سریع":"متعادل"})]})},a))})]})})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/10 flex items-center justify-center",children:e.jsx(oe,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"صدا"})]})}),e.jsxs(g,{className:"space-y-4 relative",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group/item hover:bg-[color:var(--c-border)]/20 p-4 rounded-xl transition-all duration-200",children:[e.jsx("input",{type:"checkbox",checked:r.voice.enabled,onChange:a=>b("voice","enabled",a.target.checked),className:"mt-0.5 w-5 h-5 rounded border-2 border-[color:var(--c-border)] text-[color:var(--c-primary)] focus:ring-2 focus:ring-[color:var(--c-primary)] focus:ring-offset-2 transition-all cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-[color:var(--c-text)] group-hover/item:text-[color:var(--c-primary)] transition-colors",children:"فعال‌سازی ورودی صوتی"}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)] mt-1",children:"امکان ارسال پیام با صدا"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group/item hover:bg-[color:var(--c-border)]/20 p-4 rounded-xl transition-all duration-200",children:[e.jsx("input",{type:"checkbox",checked:r.voice.autoPlay,onChange:a=>b("voice","autoPlay",a.target.checked),disabled:!r.voice.enabled,className:"mt-0.5 w-5 h-5 rounded border-2 border-[color:var(--c-border)] text-[color:var(--c-primary)] focus:ring-2 focus:ring-[color:var(--c-primary)] focus:ring-offset-2 disabled:opacity-40 disabled:cursor-not-allowed transition-all cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm font-semibold transition-colors ${r.voice.enabled?"text-[color:var(--c-text)] group-hover/item:text-[color:var(--c-primary)]":"text-[color:var(--c-muted)]"}`,children:"پخش خودکار پاسخ"}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)] mt-1",children:"پاسخ‌ها به صورت خودکار پخش شوند"})]})]})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"پوشه‌های مدل"})]})}),e.jsxs(g,{className:"space-y-6 relative",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group/item hover:bg-[color:var(--c-border)]/20 p-4 rounded-xl transition-all duration-200",children:[e.jsx("input",{type:"checkbox",checked:r.models?.autoScan??!0,onChange:a=>b("models","autoScan",a.target.checked),className:"mt-0.5 w-5 h-5 rounded border-2 border-[color:var(--c-border)] text-[color:var(--c-primary)] focus:ring-2 focus:ring-[color:var(--c-primary)] focus:ring-offset-2 transition-all cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-[color:var(--c-text)] group-hover/item:text-[color:var(--c-primary)] transition-colors",children:"اسکن خودکار مدل‌ها"}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)] mt-1",children:"به طور خودکار مدل‌ها را در پوشه‌های مشخص شده شناسایی کند"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"عمق جستجو در پوشه‌ها"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"5",value:r.models?.scanDepth??2,onChange:a=>b("models","scanDepth",parseInt(a.target.value)),className:"flex-1 h-3 bg-gradient-to-r from-[color:var(--c-border)] to-[color:var(--c-primary)]/20 rounded-lg appearance-none cursor-pointer accent-[color:var(--c-primary)] shadow-inner",disabled:!r.models?.autoScan}),e.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-[color:var(--c-primary)]/10 text-[color:var(--c-primary)] font-bold min-w-[3rem] text-center",children:r.models?.scanDepth??2})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-[color:var(--c-muted)] mt-2",children:[e.jsx("span",{children:"سطحی (1)"}),e.jsx("span",{children:"عمیق (5)"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-medium text-[color:var(--c-text)]",children:"پوشه‌های سفارشی"}),e.jsx(n,{variant:"outline",size:"sm",icon:e.jsx(Q,{className:"w-4 h-4"}),onClick:()=>{const a=document.createElement("input");a.type="file",a.webkitdirectory=!0,a.addEventListener("change",l=>{const u=l.target;if(u.files&&u.files[0]){const I=u.files[0].webkitRelativePath.split("/")[0],A=r.models?.customFolders||[];A.includes(I)||b("models","customFolders",[...A,I])}}),a.click()},className:"hover:scale-105 transition-transform duration-200",children:"افزودن پوشه"})]}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(r.models?.customFolders||[]).map((a,l)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[color:var(--c-border)]/10 rounded-lg border border-[color:var(--c-border)]/20 group/folder hover:bg-[color:var(--c-border)]/20 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[color:var(--c-primary)]/10 flex items-center justify-center",children:e.jsx(je,{className:"w-4 h-4 text-[color:var(--c-primary)]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-[color:var(--c-text)] truncate",children:a}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)]",children:"پوشه سفارشی مدل"})]}),e.jsx(n,{variant:"ghost",size:"sm",icon:e.jsx(Y,{className:"w-4 h-4"}),onClick:()=>{const I=(r.models?.customFolders||[]).filter((A,me)=>me!==l);b("models","customFolders",I)},className:"opacity-0 group-hover/folder:opacity-100 hover:bg-[color:var(--c-error)]/10 hover:text-[color:var(--c-error)] transition-all duration-200","aria-label":"حذف پوشه"})]},l)),(!r.models?.customFolders||r.models.customFolders.length===0)&&e.jsxs("div",{className:"text-center py-8 text-[color:var(--c-muted)]",children:[e.jsx(B,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"هیچ پوشه سفارشی تعریف نشده است"}),e.jsx("p",{className:"text-xs mt-1",children:'برای افزودن پوشه مدل، روی "افزودن پوشه" کلیک کنید'})]})]})]})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-500/10 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"HuggingFace Integration"})]})}),e.jsxs(g,{className:"space-y-6 relative",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:[e.jsx(ce,{className:"w-4 h-4 inline-block ml-1"}),"Access Token"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:C?"text":"password",value:j,onChange:a=>{_(a.target.value),T("idle"),x(!0)},placeholder:"hf_...",className:"w-full px-4 py-2.5 pr-12 border border-[color:var(--c-border)] rounded-lg bg-[color:var(--c-surface)] text-[color:var(--c-text)] placeholder:text-[color:var(--c-text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]"}),e.jsx("button",{onClick:()=>z(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[color:var(--c-text-muted)] hover:text-[color:var(--c-text)] transition-colors",type:"button","aria-label":C?"مخفی کردن توکن":"نمایش توکن",children:C?e.jsx(ae,{className:"w-5 h-5"}):e.jsx(re,{className:"w-5 h-5"})})]}),e.jsx(n,{variant:"outline",size:"sm",icon:h==="validating"?e.jsx($,{className:"w-4 h-4 animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),onClick:ie,disabled:!j||h==="validating",className:"px-4",children:"اعتبارسنجی"})]}),h!=="idle"&&e.jsxs("div",{className:`mt-2 flex items-center gap-2 text-sm ${h==="valid"?"text-green-600 dark:text-green-400":h==="invalid"?"text-red-600 dark:text-red-400":"text-[color:var(--c-text-muted)]"}`,children:[h==="valid"&&e.jsx(E,{className:"w-4 h-4"}),h==="invalid"&&e.jsx(G,{className:"w-4 h-4"}),h==="validating"&&e.jsx($,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:h==="valid"&&F?`توکن معتبر - ${F.username} (${F.type})`:h==="invalid"?"توکن نامعتبر است":"در حال بررسی..."})]}),e.jsx("p",{className:"text-xs text-[color:var(--c-muted)] mt-2",children:"برای دسترسی به مدل‌های خصوصی و افزایش سرعت دانلود، توکن HuggingFace خود را وارد کنید"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"Custom API URL (اختیاری)"}),e.jsx("input",{type:"url",value:M,onChange:a=>{P(a.target.value),x(!0)},placeholder:"https://huggingface.co",className:"w-full px-4 py-2.5 border border-[color:var(--c-border)] rounded-lg bg-[color:var(--c-surface)] text-[color:var(--c-text)] placeholder:text-[color:var(--c-text-muted)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group/item hover:bg-[color:var(--c-border)]/20 p-4 rounded-xl transition-all duration-200",children:[e.jsx("input",{type:"checkbox",checked:s,onChange:a=>{S(a.target.checked),x(!0)},className:"mt-0.5 w-5 h-5 rounded border-2 border-[color:var(--c-border)] text-[color:var(--c-primary)] focus:ring-2 focus:ring-[color:var(--c-primary)] focus:ring-offset-2 transition-all cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-[color:var(--c-text)] group-hover/item:text-[color:var(--c-primary)] transition-colors",children:"دانلود خودکار پس از انتخاب"}),e.jsx("div",{className:"text-xs text-[color:var(--c-muted)] mt-1",children:"شروع دانلود به محض انتخاب مدل"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-3",children:"حداکثر دانلودهای همزمان"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"3",value:N,onChange:a=>{f(parseInt(a.target.value)),x(!0)},className:"flex-1 h-3 bg-gradient-to-r from-[color:var(--c-border)] to-[color:var(--c-primary)]/20 rounded-lg appearance-none cursor-pointer accent-[color:var(--c-primary)] shadow-inner"}),e.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-[color:var(--c-primary)]/10 text-[color:var(--c-primary)] font-bold min-w-[3rem] text-center",children:N})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-[color:var(--c-muted)] mt-2",children:[e.jsx("span",{children:"1"}),e.jsx("span",{children:"3"})]})]})]})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/10 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"مدل‌های سفارشی"})]}),e.jsx(n,{variant:"outline",size:"sm",icon:e.jsx(Q,{className:"w-4 h-4"}),onClick:()=>c(!O),children:"افزودن مدل"})]})}),e.jsxs(g,{className:"space-y-4 relative",children:[O&&e.jsxs("div",{className:"p-4 border border-[color:var(--c-border)] rounded-lg bg-[color:var(--c-border)]/10 space-y-4",children:[e.jsx(y,{label:"نام مدل",value:m.name,onChange:a=>U(l=>({...l,name:a.target.value})),placeholder:"Persian TTS Model",required:!0}),e.jsx(y,{label:"Repository ID",value:m.repoId,onChange:a=>U(l=>({...l,repoId:a.target.value})),placeholder:"username/model-name",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[color:var(--c-text)] mb-2",children:"نوع"}),e.jsxs("select",{value:m.type,onChange:a=>U(l=>({...l,type:a.target.value})),className:"w-full px-4 py-2.5 border border-[color:var(--c-border)] rounded-lg bg-[color:var(--c-surface)] text-[color:var(--c-text)] focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)]",children:[e.jsx("option",{value:"model",children:"Model"}),e.jsx("option",{value:"tts",children:"TTS"}),e.jsx("option",{value:"dataset",children:"Dataset"})]})]}),e.jsx(y,{label:"URL",type:"url",value:m.url,onChange:a=>U(l=>({...l,url:a.target.value})),placeholder:"https://huggingface.co/...",required:!0}),e.jsx(y,{label:"توضیحات (اختیاری)",value:m.description||"",onChange:a=>U(l=>({...l,description:a.target.value})),placeholder:"توضیحات مدل"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"primary",size:"sm",onClick:de,className:"flex-1",children:"افزودن"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>xe(m.url),disabled:!m.url,children:"اعتبارسنجی URL"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:"لغو"})]})]}),e.jsx("div",{className:"space-y-2",children:D.length===0?e.jsxs("div",{className:"text-center py-8 text-[color:var(--c-muted)]",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"هیچ مدل سفارشی تعریف نشده است"})]}):D.map(a=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-[color:var(--c-border)]/10 rounded-lg border border-[color:var(--c-border)]/20 group/model hover:bg-[color:var(--c-border)]/20 transition-all duration-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-[color:var(--c-text)]",children:a.name}),e.jsx(J,{variant:"secondary",className:"text-xs",children:a.type})]}),e.jsx("p",{className:"text-xs text-[color:var(--c-muted)] mb-1",children:a.repoId}),a.description&&e.jsx("p",{className:"text-xs text-[color:var(--c-text-muted)]",children:a.description})]}),e.jsx(n,{variant:"ghost",size:"sm",icon:e.jsx(Y,{className:"w-4 h-4"}),onClick:()=>{K(l=>l.filter(u=>u.id!==a.id)),x(!0)},className:"opacity-0 group-hover/model:opacity-100 hover:bg-[color:var(--c-error)]/10 hover:text-[color:var(--c-error)] transition-all duration-200","aria-label":"حذف مدل"})]},a.id))})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"مدل‌های شناسایی شده"})]})}),e.jsx(g,{className:"relative",children:e.jsx($e,{})})]}),e.jsx(Re,{}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"API محلی"})]})}),e.jsxs(g,{className:"space-y-4 relative",children:[e.jsx(y,{label:"آدرس API",type:"url",value:r.api.baseUrl,onChange:a=>b("api","baseUrl",a.target.value),placeholder:"http://localhost:3001",helperText:"آدرس سرور API محلی"}),e.jsx(y,{label:"کلید API",type:"password",value:r.api.key,onChange:a=>b("api","key",a.target.value),placeholder:"sk-...",helperText:"کلید احراز هویت (اختیاری)"})]})]}),e.jsxs(v,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(w,{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/10 flex items-center justify-center",children:e.jsx(Ne,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"پیش‌فرض‌های آموزش"})]})}),e.jsx(g,{className:"space-y-4 relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{label:"تعداد دوره‌ها پیش‌فرض",type:"number",value:r.training?.defaultEpochs||10,onChange:a=>b("training","defaultEpochs",parseInt(a.target.value)),min:1,max:100,helperText:"تعداد دوره‌های پیش‌فرض برای آموزش"}),e.jsx(y,{label:"تعداد مراحل پیش‌فرض",type:"number",value:r.training?.defaultSteps||1e3,onChange:a=>b("training","defaultSteps",parseInt(a.target.value)),min:100,max:1e4,helperText:"تعداد مراحل پیش‌فرض برای آموزش"}),e.jsx(y,{label:"نرخ یادگیری پیش‌فرض",type:"number",step:"0.0001",value:r.training?.defaultLearningRate||.001,onChange:a=>b("training","defaultLearningRate",parseFloat(a.target.value)),min:1e-4,max:.01,helperText:"نرخ یادگیری پیش‌فرض"}),e.jsx(y,{label:"اندازه دسته پیش‌فرض",type:"number",value:r.training?.defaultBatchSize||32,onChange:a=>b("training","defaultBatchSize",parseInt(a.target.value)),min:1,max:128,helperText:"اندازه دسته پیش‌فرض"}),e.jsx(y,{label:"ذخیره هر N مرحله",type:"number",value:r.training?.defaultSaveEverySteps||100,onChange:a=>b("training","defaultSaveEverySteps",parseInt(a.target.value)),min:10,max:1e3,helperText:"فرکانس ذخیره چک‌پوینت‌ها"})]})})]}),k&&e.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-[color:var(--c-surface)]/95 backdrop-blur-xl border-t border-[color:var(--c-border)]/60 py-4 -mx-4 px-4 sm:hidden shadow-[0_-4px_16px_rgba(0,0,0,0.1)] animate-[fadeSlideUp_.3s_ease-out_both] z-10",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{variant:"ghost",className:"flex-1 min-h-[3rem]",onClick:X,children:"لغو"}),e.jsx(n,{variant:"primary",className:"flex-1 min-h-[3rem] shadow-lg",onClick:W,children:"ذخیره تغییرات"})]})})]})}export{Xe as default};
