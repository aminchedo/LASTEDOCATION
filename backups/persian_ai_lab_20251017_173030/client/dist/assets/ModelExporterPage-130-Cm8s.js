import{c as I,j as e,a5 as o,B as l,a0 as M,b as d,G as h,L as S,a as L,e as F,a4 as n}from"./index-Br5p3c61.js";import{b as i}from"./react-vendor-CHIk2tMd.js";import{u as T}from"./useAILab-Cx0UAcfI.js";import{C as z}from"./clock-BXxtL5XS.js";import{C as A}from"./circle-check-big-BW1H2Pf2.js";import"./api-BM4dxxsF.js";import"./auth.service-DTA6mi50.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=I("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);function q(){const{models:u,exportModel:j,importModel:v}=T(),t=i.useRef(null),[x,f]=i.useState(""),[g,m]=i.useState(!1),[r,c]=i.useState({name:"",type:"tts"}),y=async s=>{try{await j(s)}catch(a){console.error("Export failed:",a)}},N=async s=>{const a=s.target.files?.[0];if(a){if(!a.name.endsWith(".zip")){n.error("لطفاً یک فایل ZIP حاوی مدل را انتخاب کنید");return}r.name||c(C=>({...C,name:a.name.replace(".zip","")}))}},b=async()=>{const s=t.current?.files?.[0];if(!s){n.error("لطفاً یک فایل انتخاب کنید");return}if(!r.name){n.error("لطفاً نام مدل را وارد کنید");return}m(!0);try{await v(s,r),c({name:"",type:"tts"}),t.current&&(t.current.value=""),n.success("مدل با موفقیت وارد شد")}catch(a){console.error("Import failed:",a)}finally{m(!1)}},p=u.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())),w=s=>{const a=new Date(s);return new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},k=s=>{switch(s){case"tts":return"تبدیل متن به گفتار";case"stt":return"تبدیل گفتار به متن";case"nlp":return"پردازش زبان طبیعی";case"cv":return"بینایی ماشین";case"custom":return"سفارشی";case"pretrained":return"آموزش‌دیده";default:return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(o,{className:"w-8 h-8 text-[color:var(--c-primary)]"}),"صادرات و واردات مدل"]}),e.jsx(l,{variant:"primary",icon:e.jsx(M,{className:"w-4 h-4"}),onClick:()=>t.current?.click(),children:"وارد کردن مدل"})]}),t.current?.files?.length?e.jsxs(d,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"وارد کردن مدل"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"فایل انتخاب شده"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[color:var(--c-bg-elevated)] rounded-lg",children:[e.jsx(E,{className:"w-5 h-5 text-[color:var(--c-text-secondary)]"}),e.jsx("span",{children:t.current.files[0].name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"نام مدل"}),e.jsx(h,{value:r.name,onChange:s=>c({...r,name:s.target.value}),placeholder:"مثال: persian-bert-v2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"نوع مدل"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:r.type,onChange:s=>c({...r,type:s.target.value}),children:[e.jsx("option",{value:"tts",children:"تبدیل متن به گفتار (TTS)"}),e.jsx("option",{value:"stt",children:"تبدیل گفتار به متن (STT)"}),e.jsx("option",{value:"nlp",children:"پردازش زبان طبیعی (NLP)"}),e.jsx("option",{value:"cv",children:"بینایی ماشین (CV)"}),e.jsx("option",{value:"custom",children:"سفارشی"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{variant:"primary",onClick:b,loading:g,disabled:!r.name,children:"وارد کردن"}),e.jsx(l,{variant:"ghost",onClick:()=>{t.current.value="",c({name:"",type:"tts"})},children:"انصراف"})]})]})]}):null,e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[color:var(--c-text-secondary)]"}),e.jsx(h,{className:"pr-10",placeholder:"جستجو در مدل‌ها...",value:x,onChange:s=>f(s.target.value)})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.length===0?e.jsxs(d,{className:"col-span-full p-12 text-center",children:[e.jsx(o,{className:"w-16 h-16 mx-auto mb-4 text-[color:var(--c-text-secondary)]"}),e.jsx("p",{className:"text-lg text-[color:var(--c-text-secondary)]",children:"هیچ مدلی یافت نشد"}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-secondary)] mt-2",children:"ابتدا یک مدل آموزش دهید یا وارد کنید"})]}):p.map(s=>e.jsxs(d,{className:"p-4 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="ready"?"bg-green-100 text-green-800":s.status==="training"?"bg-blue-100 text-blue-800":s.status==="available"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:s.status==="ready"?"آماده":s.status==="training"?"در حال آموزش":s.status==="available"?"موجود":"خطا"})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-[color:var(--c-text-secondary)]"}),e.jsx("span",{children:k(s.type)})]}),s.architecture&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-[color:var(--c-text-secondary)]"}),e.jsx("span",{children:s.architecture})]}),s.createdAt&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-[color:var(--c-text-secondary)]"}),e.jsx("span",{children:w(s.createdAt)})]}),s.inputShape&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-[color:var(--c-text-secondary)]"}),e.jsxs("span",{className:"text-xs",children:["ورودی: [",s.inputShape.join(", "),"]"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(l,{variant:"primary",size:"sm",icon:e.jsx(F,{className:"w-4 h-4"}),className:"flex-1",onClick:()=>y(s.id),disabled:s.status!=="ready",children:"صادرات"})})]},s.id))}),e.jsx("input",{ref:t,type:"file",accept:".zip",onChange:N,className:"hidden"})]})}export{q as ModelExporterPage};
