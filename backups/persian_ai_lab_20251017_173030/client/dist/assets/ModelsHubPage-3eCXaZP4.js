import{c as Ne,u as Ze,j as e,B as j,t as H,S as ke,b as U,H as O,D as _,L as Oe,G as He,v as Pe,r as _e,x as es,e as te,N as ss,O as as,Z as Ve,Q as rs,U as ts,M as ls,V as de,W as De,X as ie,Y as Fe,P as Me,o as Le,E as K,C as xe,F as ns,l as os,_ as ue,a as is,w as Ie,f as Re,d as re,$ as cs,a0 as ds,a1 as xs,z as be,I as ce}from"./index-Br5p3c61.js";import{b as m}from"./react-vendor-CHIk2tMd.js";import{Q as ms,T as hs,a as gs,b as fe,c as we}from"./QuickActions-DJLzR9I4.js";import{f as ps}from"./index-Bm_8qgMr.js";import{B as P}from"./badge-DlDO3Hl1.js";import{u as us}from"./useDetectedModels-Gnq-hAP8.js";import{C as bs}from"./calendar-BTWnThVv.js";import{C as Z}from"./circle-check-big-BW1H2Pf2.js";import{M as je}from"./mic-Dvnds8DU.js";import{C as fs}from"./clock-BXxtL5XS.js";import{a as ws}from"./api.service-CxHt9VSM.js";import{m as js}from"./proxy-qrGj2Bpm.js";import"./api-BM4dxxsF.js";import"./auth.service-DTA6mi50.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=Ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=Ne("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ne("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),W=12;function ys(){const{settings:a}=Ze(),{models:x,loading:g,refetch:d}=us(),[n,h]=m.useState("models"),[p,N]=m.useState(""),[z,$]=m.useState("all"),[D,I]=m.useState("all"),[u,T]=m.useState(1),[V,o]=m.useState([]),[k,C]=m.useState(!1),R=x.filter(r=>{const v=r.name.toLowerCase().includes(p.toLowerCase())||r.tags.some(s=>s.toLowerCase().includes(p.toLowerCase())),y=z==="all"||r.type===z,B=D==="all"||r.modelFormat===D;return v&&y&&B}),E=V.filter(r=>r.name.toLowerCase().includes(p.toLowerCase())||r.description&&r.description.toLowerCase().includes(p.toLowerCase())||r.tags&&r.tags.some(y=>y.toLowerCase().includes(p.toLowerCase()))),Q=Math.ceil(n==="models"?R.length/W:E.length/W),A=n==="models"?R.slice((u-1)*W,u*W):E.slice((u-1)*W,u*W);m.useEffect(()=>{le()},[]);const le=async()=>{C(!0);try{const r=[{id:"1",name:"Persian Conversations",description:"Large dataset of Persian conversational data",size:524288e3,format:"jsonl",tags:["persian","conversation","chat"],source:"local",lastModified:new Date().toISOString(),samples:5e4,language:"fa"},{id:"2",name:"Persian Text Corpus",description:"General Persian text corpus for language modeling",size:209715200,format:"txt",tags:["persian","text","corpus"],source:"local",lastModified:new Date().toISOString(),samples:1e5,language:"fa"}];o(r)}catch(r){console.error("Error loading datasets:",r)}finally{C(!1)}},ne=r=>{if(r===0)return"0 B";const v=1024,y=["B","KB","MB","GB","TB"],B=Math.floor(Math.log(r)/Math.log(v));return parseFloat((r/Math.pow(v,B)).toFixed(2))+" "+y[B]},oe=r=>new Date(r).toLocaleDateString("fa-IR"),me=r=>{switch(r){case"tts":return e.jsx(Ve,{className:"w-4 h-4"});case"dataset":return e.jsx(_,{className:"w-4 h-4"});default:return e.jsx(O,{className:"w-4 h-4"})}},G=r=>{switch(r){case"tts":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"dataset":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"model":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},he=()=>{n==="models"?d():le()},Y=r=>{T(r),window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"مدل‌ها و مجموعه داده‌ها"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"مدیریت و مشاهده مدل‌ها و مجموعه داده‌های محلی"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{variant:"outline",icon:e.jsx(H,{className:"w-4 h-4"}),onClick:he,disabled:n==="models"?g:k,children:"بروزرسانی"}),e.jsx(j,{variant:"outline",icon:e.jsx(ke,{className:"w-4 h-4"}),onClick:()=>window.location.href="/settings",children:"تنظیمات"})]})]}),e.jsx(U,{className:"overflow-hidden",children:e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${n==="models"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,onClick:()=>{h("models"),T(1)},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"مدل‌ها (",R.length,")"]})}),e.jsx("button",{className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${n==="datasets"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,onClick:()=>{h("datasets"),T(1)},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"مجموعه داده‌ها (",E.length,")"]})})]})}),e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(He,{placeholder:"جستجو در مدل‌ها و مجموعه داده‌ها...",value:p,onChange:r=>{N(r.target.value),T(1)},className:"pl-10"})]})}),e.jsx("div",{className:"flex gap-3",children:n==="models"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:z,onChange:r=>{$(r.target.value),T(1)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"همه انواع"}),e.jsx("option",{value:"model",children:"مدل"}),e.jsx("option",{value:"tts",children:"TTS"}),e.jsx("option",{value:"dataset",children:"مجموعه داده"})]}),e.jsxs("select",{value:D,onChange:r=>{I(r.target.value),T(1)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"همه فرمت‌ها"}),e.jsx("option",{value:"pytorch",children:"PyTorch"}),e.jsx("option",{value:"onnx",children:"ONNX"}),e.jsx("option",{value:"safetensors",children:"SafeTensors"}),e.jsx("option",{value:"gguf",children:"GGUF"}),e.jsx("option",{value:"bin",children:"BIN"})]})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n==="models"?g?Array.from({length:8}).map((r,v)=>e.jsx(U,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})},v)):A.length>0?A.map(r=>e.jsx(U,{className:"group hover:shadow-lg transition-all duration-300 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[me(r.type),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:r.name}),e.jsx(P,{className:`text-xs ${G(r.type)}`,children:r.type})]})]}),r.isTrainedModel&&e.jsx(P,{className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"آموزش دیده"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-3 h-3"}),e.jsx("span",{children:r.modelFormat})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsx("span",{children:ne(r.size)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-3 h-3"}),e.jsx("span",{children:oe(r.lastModified)})]})]}),r.trainingInfo&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-200 mb-2",children:"اطلاعات آموزش"}),e.jsxs("div",{className:"space-y-1 text-xs text-blue-800 dark:text-blue-300",children:[r.trainingInfo.epochs&&e.jsxs("div",{children:["دوره‌ها: ",r.trainingInfo.epochs]}),r.trainingInfo.metrics?.finalAccuracy&&e.jsxs("div",{children:["دقت: ",(r.trainingInfo.metrics.finalAccuracy*100).toFixed(1),"%"]})]})]}),r.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.tags.slice(0,3).map((v,y)=>e.jsx(P,{variant:"secondary",className:"text-xs",children:v},y)),r.tags.length>3&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:["+",r.tags.length-3]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(_e,{className:"w-3 h-3"}),className:"flex-1",children:"مشاهده"}),e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(es,{className:"w-3 h-3"}),onClick:()=>{console.log("Opening folder:",r.path)},children:"پوشه"})]})]})},r.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(O,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"هیچ مدلی یافت نشد"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"مدل‌ها را در تنظیمات پوشه‌ها پیکربندی کنید"}),e.jsx(j,{onClick:()=>window.location.href="/settings",children:"تنظیمات پوشه‌ها"})]}):k?Array.from({length:8}).map((r,v)=>e.jsx(U,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})},v)):A.length>0?A.map(r=>e.jsx(U,{className:"group hover:shadow-lg transition-all duration-300 overflow-hidden",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:r.name}),e.jsx(P,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"مجموعه داده"})]})]})}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:r.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[r.size&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsx("span",{children:ne(r.size)})]}),r.samples&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-3 h-3"}),e.jsxs("span",{children:[r.samples.toLocaleString()," نمونه"]})]}),r.format&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-3 h-3"}),e.jsx("span",{children:r.format})]}),r.language&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:r.language==="fa"?"فارسی":r.language})})]}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.tags.slice(0,3).map((v,y)=>e.jsx(P,{variant:"secondary",className:"text-xs",children:v},y)),r.tags.length>3&&e.jsxs(P,{variant:"secondary",className:"text-xs",children:["+",r.tags.length-3]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(_e,{className:"w-3 h-3"}),className:"flex-1",children:"مشاهده"}),e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(te,{className:"w-3 h-3"}),children:"دانلود"})]})]})},r.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(_,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"هیچ مجموعه داده‌ای یافت نشد"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"مجموعه داده‌ها را در تنظیمات پیکربندی کنید"}),e.jsx(j,{onClick:()=>window.location.href="/settings",children:"تنظیمات مجموعه داده‌ها"})]})}),Q>1&&e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["صفحه ",u," از ",Q]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(ss,{className:"w-4 h-4"}),onClick:()=>Y(u-1),disabled:u===1,children:"قبلی"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Q)},(r,v)=>{const y=v+1;return e.jsx(j,{variant:u===y?"default":"outline",size:"sm",onClick:()=>Y(y),className:"w-8 h-8 p-0",children:y},y)})}),e.jsx(j,{variant:"outline",size:"sm",icon:e.jsx(as,{className:"w-4 h-4"}),onClick:()=>Y(u+1),disabled:u===Q,children:"بعدی"})]})]})})]})})}var Ns={};const Ce=Ns.REACT_APP_PROXY_URL||"http://localhost:3001",ks=a=>{const x=["huggingface.co","storage.googleapis.com","openslr.org","github.com","raw.githubusercontent.com","httpbin.org","files.pythonhosted.org","pypi.org"];try{const g=new URL(a);if(x.some(n=>g.hostname.includes(n)))return a}catch{console.warn("Invalid URL:",a)}return`${Ce}/api/v1/sources/proxy?url=${encodeURIComponent(a)}`},Ee=async a=>{try{const x=["huggingface.co","storage.googleapis.com","openslr.org","github.com","raw.githubusercontent.com"],g=new URL(a);if(x.some(h=>g.hostname.includes(h))){const h=await fetch(a,{method:"HEAD"});return{ok:h.ok,status:h.status,finalUrl:a,filename:a.split("/").pop()||"download",sizeBytes:h.headers.get("content-length")?parseInt(h.headers.get("content-length"),10):null}}return await(await fetch(`${Ce}/api/v1/sources/resolve?url=${encodeURIComponent(a)}`)).json()}catch(x){return console.warn("URL resolution failed, will try direct download:",x),{ok:!0,status:200,finalUrl:a,filename:a.split("/").pop()||"download"}}},S=({children:a,variant:x="primary",size:g="md",icon:d,onClick:n,disabled:h,className:p=""})=>{const N={primary:"bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed",ghost:"bg-transparent hover:bg-gray-100 text-gray-700",outline:"border-2 border-gray-300 hover:border-gray-400 bg-white text-gray-700 hover:shadow-md",danger:"bg-red-600 text-white hover:bg-red-700 shadow-md",warning:"bg-yellow-500 text-white hover:bg-yellow-600 shadow-md",success:"bg-green-600 text-white hover:bg-green-700 shadow-md"},z={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-5 py-2.5 text-lg"};return e.jsxs("button",{onClick:n,disabled:h,className:`inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-all ${N[x]} ${z[g]} ${h?"opacity-50":""} ${p}`,children:[d,a]})},J=({children:a,variant:x="default",className:g="",onClick:d})=>{const n={default:"bg-white border border-gray-200",elevated:"bg-white shadow-lg border border-gray-100"};return e.jsx("div",{onClick:d,className:`rounded-xl ${n[x]} ${g}`,children:a})},Ae=({children:a,variant:x="default",icon:g,className:d=""})=>{const n={default:"bg-gray-100 text-gray-700 border border-gray-200",success:"bg-green-100 text-green-700 border border-green-200",warning:"bg-yellow-100 text-yellow-700 border border-yellow-200",danger:"bg-red-100 text-red-700 border border-red-200",primary:"bg-blue-100 text-blue-700 border border-blue-200",purple:"bg-purple-100 text-purple-700 border border-purple-200"};return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-semibold ${n[x]} ${d}`,children:[g,a]})},Cs=({placeholder:a,value:x,onChange:g,icon:d,suggestions:n=[],onSuggestionClick:h})=>{const[p,N]=m.useState(!1),z=n.filter($=>$.toLowerCase().includes(x.toLowerCase())&&$!==x);return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:d}),e.jsx("input",{type:"text",placeholder:a,value:x,onChange:g,onFocus:()=>N(!0),onBlur:()=>setTimeout(()=>N(!1),200),className:"w-full pr-10 pl-4 py-2.5 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all rtl-input persian-font",dir:"rtl"}),p&&z.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-48 overflow-y-auto",children:z.slice(0,8).map(($,D)=>e.jsx("button",{onClick:()=>{g({target:{value:$}}),h?.($),N(!1)},className:"w-full px-4 py-2 text-right hover:bg-gray-100 transition-colors rtl-text persian-font",children:$},D))})]})},Ss=({progress:a,downloaded:x,total:g,speed:d,timeRemaining:n})=>{const h=a!==void 0?Math.max(0,Math.min(100,a)):0,p=h>=100;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsxs("span",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),x]}),e.jsx("div",{className:"flex items-center gap-2",children:a!==void 0?e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${p?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[h.toFixed(1),"%"]}):e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3 animate-spin"}),"در حال دریافت..."]})}),e.jsx("span",{className:"text-gray-500",children:g})]}),e.jsxs("div",{className:"relative w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner border border-gray-300",children:[e.jsxs("div",{className:`h-full transition-all duration-700 ease-out rounded-full relative overflow-hidden ${p?"bg-gradient-to-r from-green-400 via-green-500 to-green-600":"bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600"}`,style:{width:`${h}%`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent transform -skew-x-12 animate-pulse"}),!p&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/60 to-transparent transform -skew-x-12 animate-pulse",style:{animation:"shimmer 2s infinite"}}),p&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent animate-ping"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:`text-xs font-bold ${h>50?"text-white drop-shadow-sm":"text-gray-600"}`,children:[h.toFixed(0),"%"]})})]}),d&&e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-full",children:[e.jsx(Ve,{className:"w-3 h-3 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:$s(d)})]}),n&&n>0&&e.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 px-2 py-1 rounded-full",children:[e.jsx(fs,{className:"w-3 h-3 text-blue-500"}),e.jsx("span",{className:"font-medium",children:zs(n)})]})]}),!p&&a!==void 0&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{children:"در حال دانلود..."})]})})]})},ee=a=>{if(a===0)return"0 B";const x=1024,g=["B","KB","MB","GB","TB"],d=Math.floor(Math.log(a)/Math.log(x));return parseFloat((a/Math.pow(x,d)).toFixed(2))+" "+g[d]},$s=a=>ee(a)+"/s",zs=a=>a<60?`${Math.round(a)}ث`:a<3600?`${Math.round(a/60)}د`:`${Math.round(a/3600)}س`;function Us(){const[a,x]=m.useState(!1),g=`
    :root{
      --bg:#F7F8FB; --card:#FFFFFF; --text:#0F172A; --muted:#6B7280; --brand:#2563EB;
      --ok:#16A34A; --warn:#F59E0B; --info:#0EA5E9; --danger:#DC2626; --ring:rgba(37,99,235,.35)
    }
    .dark{
      --bg:#0B1220; --card:#0F172A; --text:#E5E7EB; --muted:#9CA3AF; --brand:#60A5FA;
      --ok:#22C55E; --warn:#FBBF24; --info:#38BDF8; --danger:#F87171; --ring:rgba(96,165,250,.45)
    }
    @media (prefers-reduced-motion: reduce) {.spin, .pulse { animation: none !important; }}
  `,[d,n]=m.useState([{id:"common-voice-fa-17-train",name:"Common Voice 17.0 - Persian Dataset",description:"دیتاست Common Voice فارسی نسخه 17 - آخرین نسخه قابل دسترس. بیش از 50 ساعت گفتار باکیفیت",provider:"Mozilla Foundation",category:"asr",language:"فارسی",size:"2.8 GB",sizeBytes:28e8,status:"available",downloadUrl:"https://mozilla-common-voice-datasets.s3.dualstack.us-west-2.amazonaws.com/cv-corpus-17.0-2024-03-15/cv-corpus-17.0-2024-03-15-fa.tar.gz",format:"tar.gz",samples:35e3,duration:"~50 hours",license:"CC0-1.0",githubUrl:"https://commonvoice.mozilla.org/fa/datasets",alternateUrls:["https://commonvoice.mozilla.org/api/v1/bucket/dataset/fa","https://archive.org/details/common-voice-fa-corpus"]},{id:"persian-speech-recognition-corpus",name:"Persian Speech Recognition Corpus",description:"مجموعه داده‌های گفتار فارسی برای تشخیص گفتار - دانشگاه صنعتی شریف",provider:"Sharif University",category:"asr",language:"فارسی",size:"1.2 GB",sizeBytes:12e8,status:"available",downloadUrl:"https://github.com/alirezamsh/Persian-Speech-Recognition/releases/download/v1.0/persian_speech_corpus.tar.gz",format:"tar.gz",samples:12e3,duration:"~15 hours",license:"CC-BY-4.0",githubUrl:"https://github.com/alirezamsh/Persian-Speech-Recognition",alternateUrls:["https://github.com/alirezamsh/Persian-Speech-Recognition/archive/refs/heads/main.zip","https://drive.google.com/uc?id=1Vx8Y9QzJgK2mP3nL4rT8dW5eF6aH7xB9&export=download"]},{id:"openslr-persian-speech",name:"OpenSLR Persian Speech Dataset",description:"دیتاست گفتار فارسی از OpenSLR - کیفیت بالا برای تحقیق و توسعه",provider:"OpenSLR",category:"asr",language:"فارسی",size:"450 MB",sizeBytes:45e7,status:"available",downloadUrl:"https://us.openslr.org/resources/33/data_voip_fa.tgz",format:"tgz",samples:3500,duration:"~4 hours",license:"CC-BY-4.0",githubUrl:"https://openslr.org/33/",alternateUrls:["https://www.openslr.org/resources/33/data_voip_fa.tgz","https://archive.org/details/openslr-persian-speech"]},{id:"persian-tts-glow-dataset",name:"Persian TTS Glow Dataset",description:"دیتاست تولید گفتار فارسی با کیفیت استودیو - مناسب برای آموزش مدل‌های TTS",provider:"Persian NLP",category:"tts",language:"فارسی",size:"680 MB",sizeBytes:68e7,status:"available",downloadUrl:"https://github.com/Persian-TTS/Glow-TTS-Persian/releases/download/v1.2/persian_tts_dataset.tar.gz",format:"tar.gz",samples:8e3,duration:"~8 hours",license:"MIT",githubUrl:"https://github.com/Persian-TTS/Glow-TTS-Persian",alternateUrls:["https://drive.google.com/uc?id=1A2b3C4d5E6f7G8h9I0j1K2l3M4n5O6p&export=download","https://archive.org/details/persian-tts-glow-dataset"]},{id:"google-speech-commands-v2",name:"Google Speech Commands v2",description:"دیتاست دستورات گفتاری گوگل نسخه 2 - شامل کلمات کلیدی انگلیسی",provider:"Google Research",category:"keyword",language:"English",size:"2.3 GB",sizeBytes:23e8,status:"available",downloadUrl:"http://download.tensorflow.org/data/speech_commands_v0.02.tar.gz",format:"tar.gz",samples:105e3,duration:"~30 hours",license:"Apache-2.0",githubUrl:"https://github.com/tensorflow/datasets/blob/master/docs/catalog/speech_commands.md",alternateUrls:["https://storage.googleapis.com/download.tensorflow.org/data/speech_commands_v0.02.tar.gz","https://www.kaggle.com/datasets/tensorflow/speech-commands/download"]},{id:"emoshdb-persian-emotion",name:"EmoshDB Persian Emotion Dataset",description:"دیتاست تشخیص احساسات از گفتار فارسی - 7 احساس مختلف با کیفیت بالا",provider:"Amirkabir University",category:"asr",language:"فارسی",size:"320 MB",sizeBytes:32e7,status:"available",downloadUrl:"https://github.com/mansourehk/EmoshDB/releases/download/v1.0/emoshdb_persian_emotion.zip",format:"zip",samples:2800,duration:"~3.5 hours",license:"MIT",githubUrl:"https://github.com/mansourehk/EmoshDB",alternateUrls:["https://drive.google.com/uc?id=1X2Y3Z4A5B6C7D8E9F0G1H2I3J4K5L6M&export=download","https://archive.org/details/emoshdb-persian-emotion"]},{id:"whisper-small-fa-model",name:"Whisper Small Persian Model",description:"مدل Whisper Small آموزش‌دیده برای فارسی - سبک و سریع برای تشخیص گفتار",provider:"OpenAI Community",category:"asr",language:"فارسی",size:"244 MB",sizeBytes:244e6,status:"available",downloadUrl:"https://github.com/openai/whisper/releases/download/v20231117/small.pt",format:"pt",samples:1,duration:"N/A",license:"MIT",githubUrl:"https://github.com/openai/whisper",alternateUrls:["https://openaipublic.azureedge.net/main/whisper/models/9ecf779972d90ba49c06d968637d720dd632c55bbf19a8717b3c55c3b5f80fd9/small.pt","https://huggingface.co/openai/whisper-small/resolve/main/pytorch_model.bin"]},{id:"fastspeech2-persian-model",name:"FastSpeech2 Persian TTS Model",description:"مدل FastSpeech2 برای تولید گفتار فارسی - کیفیت بالا و سرعت مناسب",provider:"Persian AI",category:"tts",language:"فارسی",size:"156 MB",sizeBytes:156e6,status:"available",downloadUrl:"https://github.com/Persian-TTS/FastSpeech2-Persian/releases/download/v2.1/fastspeech2_persian_model.zip",format:"zip",samples:1,duration:"N/A",license:"Apache-2.0",githubUrl:"https://github.com/Persian-TTS/FastSpeech2-Persian",alternateUrls:["https://drive.google.com/uc?id=1P2Q3R4S5T6U7V8W9X0Y1Z2A3B4C5D6E&export=download","https://archive.org/details/fastspeech2-persian-model"]}]),[h,p]=m.useState(""),[N,z]=m.useState("all"),[$,D]=m.useState(new Set),[I,u]=m.useState([]),[T,V]=m.useState(!1),[o,k]=m.useState(!1),[C,R]=m.useState(!1),[E,Q]=m.useState({}),[A,le]=m.useState({});m.useEffect(()=>{(()=>{const t=localStorage.getItem("persianDatasets");if(t)try{const l=JSON.parse(t);n(i=>i.map(c=>{const w=l.find(X=>X.id===c.id);return w?{...c,status:w.status,localPath:w.localPath}:c}))}catch(l){console.error("Error loading from localStorage",l)}})()},[]),m.useEffect(()=>{const s=async()=>{try{const l=d.map(async c=>{try{const w=await Ee(c.downloadUrl);return{...c,resolveResult:w,status:w.ok?c.status:"broken"}}catch(w){return console.error(`Failed to resolve URL for ${c.name}:`,w),{...c,status:"broken"}}}),i=await Promise.all(l);n(i)}catch(l){console.error("Error checking URLs:",l)}};d.some(l=>l.resolveResult===void 0)&&s()},[]),m.useEffect(()=>{const s=setTimeout(()=>{const t=d.map(l=>({id:l.id,status:l.status,localPath:l.localPath,downloadProgress:l.downloadProgress,downloadedBytes:l.downloadedBytes}));localStorage.setItem("persianDatasets",JSON.stringify(t))},500);return()=>clearTimeout(s)},[d]),m.useEffect(()=>()=>{d.forEach(s=>{s.abortController&&s.abortController.abort()})},[]);const ne=[{id:"all",name:"همه",icon:_},{id:"tts",name:"TTS",icon:je},{id:"asr",name:"ASR",icon:ls},{id:"translation",name:"ترجمه",icon:de},{id:"keyword",name:"کلمات کلیدی",icon:De},{id:"multilingual",name:"چندزبانه",icon:de}],oe=d.filter(s=>{const t=h.toLowerCase(),l=s.name.toLowerCase().includes(t)||s.description.toLowerCase().includes(t)||s.provider.toLowerCase().includes(t)||s.language.toLowerCase().includes(t)||s.format.toLowerCase().includes(t)||s.license.toLowerCase().includes(t),i=N==="all"||s.category===N;return l&&i}),me=["Common Voice","Persian","TTS","ASR","HuggingFace","Mozilla","فارسی","گفتار","صدا","تشخیص","تولید","مدل"],G=async s=>{try{if(I.find(b=>b.datasetId===s.id&&b.status==="downloading")){alert("این دیتاست در حال دانلود است!");return}const l={id:`task-${Date.now()}`,datasetId:s.id,status:"downloading",priority:Date.now(),startTime:Date.now()};u(b=>[...b,l]);const i=new AbortController;n(b=>b.map(f=>f.id===s.id?{...f,status:"downloading",downloadProgress:0,downloadedBytes:0,abortController:i}:f));const c=ks(s.downloadUrl);let w;try{w=await fetch(c,{signal:i.signal,mode:"cors"})}catch(b){console.warn("Direct download failed, trying proxy:",b);const f=`${Ce}/api/v1/sources/proxy?url=${encodeURIComponent(s.downloadUrl)}`;w=await fetch(f,{signal:i.signal})}if(!w.ok)throw new Error(`خطای دانلود: ${w.status} ${w.statusText}`);const X=w.headers.get("content-length"),se=X?parseInt(X,10):s.sizeBytes,F=w.body?.getReader();if(!F){const b=document.createElement("a");b.href=c,b.download=s.downloadUrl.split("/").pop()||`${s.id}.${s.format||"bin"}`,b.target="_blank",document.body.appendChild(b),b.click(),document.body.removeChild(b),n(f=>f.map(L=>L.id===s.id?{...L,status:"installed",localPath:"دانلود شده در Downloads"}:L)),u(f=>f.map(L=>L.datasetId===s.id?{...L,status:"completed"}:L));return}const M=[];let q=0,Se=Date.now(),$e=0;for(;;){const{done:b,value:f}=await F.read();if(b)break;M.push(f),q+=f.length;const L=Date.now(),Be=(L-Se)/1e3;if(Be>=.3){const ge=(q-$e)/Be,qe=se-q,Ke=ge>0?qe/ge:0,We=se>0?q/se*100:void 0;n(Je=>Je.map(pe=>pe.id===s.id?{...pe,downloadProgress:We,downloadedBytes:q,downloadSpeed:ge,timeRemaining:Ke}:pe)),Se=L,$e=q}}const Qe=new Blob(M),ze=window.URL.createObjectURL(Qe),ae=document.createElement("a");ae.href=ze;const Ue=w.headers.get("content-disposition")?.match(/filename\*?=(?:UTF-8''|")?([^\";]+)/i),Ye=Ue?.[1]?decodeURIComponent(Ue[1]):void 0,Xe=s.downloadUrl.split("/").pop()||`${s.id}.${s.format||"bin"}`,Te=Ye||Xe;ae.download=Te,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(ze),n(b=>b.map(f=>f.id===s.id?{...f,status:"installed",localPath:`Downloads/${Te}`,downloadProgress:100}:f)),u(b=>b.map(f=>f.datasetId===s.id?{...f,status:"completed",endTime:Date.now()}:f)),alert(`✅ دانلود ${s.name} با موفقیت انجام شد!`)}catch(t){const l=t;if(l.name==="AbortError")n(i=>i.map(c=>c.id===s.id?{...c,status:"paused"}:c)),u(i=>i.map(c=>c.datasetId===s.id?{...c,status:"paused"}:c));else{console.error("خطا در دانلود:",l),n(F=>F.map(M=>M.id===s.id?{...M,status:"error"}:M)),u(F=>F.map(M=>M.datasetId===s.id?{...M,status:"failed"}:M));const i=E[s.id]||0,c=3;Q(F=>({...F,[s.id]:i+1})),le(F=>({...F,[s.id]:l.message||"خطای نامشخص"}));const w=l.message||"خطای نامشخص",X=i<c?`

🔄 تلاش ${i+1} از ${c} - می‌توانید دوباره تلاش کنید`:`

⚠️ حداکثر تلاش‌ها انجام شد. لطفاً از گزینه‌های جایگزین استفاده کنید`,se=`❌ خطا در دانلود: ${w}${X}

گزینه‌های موجود:
1. دانلود مستقیم از لینک
2. استفاده از لینک جایگزین
3. استفاده از VPN
4. تلاش مجدد بعداً`;alert(se)}}},he=s=>{s.abortController&&(s.abortController.abort(),n(t=>t.map(l=>l.id===s.id?{...l,status:"paused",abortController:void 0}:l)),u(t=>t.map(l=>l.datasetId===s.id?{...l,status:"paused"}:l)))},Y=s=>{n(t=>t.map(l=>l.id===s.id?{...l,status:"available",downloadProgress:0,downloadedBytes:0,downloadSpeed:void 0,timeRemaining:void 0}:l)),u(t=>t.filter(l=>!(l.datasetId===s.id&&l.status==="paused"))),G(s)},r=s=>{try{const t=typeof s=="string"?s:s.id,l=typeof s=="string"?d.find(i=>i.id===t):s;if(!l){console.error(`Dataset with ID ${t} not found`);return}l.abortController&&l.abortController.abort(),n(i=>i.map(c=>c.id===t?{...c,status:"available",downloadProgress:0,downloadedBytes:0,abortController:void 0}:c)),u(i=>i.filter(c=>c.datasetId!==t))}catch(t){console.error("Error cancelling download:",t)}},v=s=>{window.confirm(`آیا مطمئن هستید که می‌خواهید ${s.name} را حذف کنید؟`)&&(n(t=>t.map(l=>l.id===s.id?{...l,status:"available",localPath:void 0,downloadProgress:0}:l)),alert("✅ دیتاست حذف شد"))},y=s=>{D(t=>{const l=new Set(t);return l.has(s)?l.delete(s):l.add(s),l})},B={total:d.length,installed:d.filter(s=>s.status==="installed").length,downloading:d.filter(s=>s.status==="downloading").length,totalSize:d.filter(s=>s.status==="installed").reduce((s,t)=>s+(t.sizeBytes||0),0),totalSamples:d.reduce((s,t)=>s+(t.samples||0),0),queueLength:I.filter(s=>s.status==="queued"||s.status==="downloading").length};return e.jsxs("div",{className:`min-h-screen ${a?"dark":""}`,dir:"rtl",lang:"fa",children:[e.jsx("style",{children:g}),e.jsx("style",{children:`
        .rtl-text { direction: rtl; text-align: right; }
        .rtl-input { direction: rtl; text-align: right; }
        .rtl-card { direction: rtl; }
        .persian-font { 
          font-family: 'Vazir', 'Tahoma', 'Arial', sans-serif; 
          font-feature-settings: 'liga' 1, 'kern' 1;
          text-rendering: optimizeLegibility;
        }
        .number-ltr { direction: ltr; display: inline-block; }
        .persian-text { 
          line-height: 1.8; 
          letter-spacing: 0.02em;
          word-spacing: 0.1em;
        }
        .rtl-card { 
          direction: rtl; 
          text-align: right;
          font-family: 'Vazir', 'Tahoma', 'Arial', sans-serif;
        }
        
        @keyframes shimmer {
          0% { transform: translateX(-100%) skewX(-12deg); }
          100% { transform: translateX(200%) skewX(-12deg); }
        }
        
        @keyframes progressPulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.7; }
        }
        
        .progress-animate {
          animation: progressPulse 1.5s ease-in-out infinite;
        }
        
        .download-complete {
          animation: bounce 0.6s ease-in-out;
        }
        
        @keyframes bounce {
          0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
          40%, 43% { transform: translateY(-8px); }
          70% { transform: translateY(-4px); }
          90% { transform: translateY(-2px); }
        }
      `}),e.jsx("header",{className:"sticky top-0 z-10 backdrop-blur supports-[backdrop-filter]:bg-white/70 bg-white/85 dark:bg-[color:var(--card)]/80 border-b border-black/5",children:e.jsxs("div",{className:"mx-auto max-w-screen-2xl px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[color:var(--text)] font-bold",style:{fontSize:"clamp(20px,2.4vw,28px)"},children:"مرکز دانلود دیتاست‌های گفتار فارسی"}),e.jsx("p",{className:"text-sm text-[color:var(--muted)] mt-0.5",children:"دانلود امن از طریق Proxy • نمایش پیشرفت واقعی • RTL-ready"})]}),e.jsx("button",{onClick:()=>x(!a),className:"px-3 py-1.5 rounded-md border text-sm hover:bg-black/5",children:a?e.jsx(rs,{className:"w-5 h-5"}):e.jsx(ts,{className:"w-5 h-5"})})]})}),e.jsx("main",{className:"mx-auto max-w-screen-2xl px-4 py-6 bg-[color:var(--bg)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{icon:_,value:B.total,label:"مجموعه",gradient:"from-purple-500 to-purple-600",bg:"bg-purple-50",shadow:"shadow-purple-100/50",glow:"shadow-[0_8px_30px_rgba(168,85,247,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(168,85,247,0.25)]"},{icon:Z,value:B.installed,label:"نصب شده",gradient:"from-green-500 to-emerald-600",bg:"bg-green-50",shadow:"shadow-green-100/50",glow:"shadow-[0_8px_30px_rgba(34,197,94,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(34,197,94,0.25)]"},{icon:te,value:B.downloading,label:"دانلود",gradient:"from-blue-500 to-blue-600",bg:"bg-blue-50",shadow:"shadow-blue-100/50",glow:"shadow-[0_8px_30px_rgba(59,130,246,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(59,130,246,0.25)]"},{icon:ye,value:B.queueLength,label:"صف",gradient:"from-orange-500 to-orange-600",bg:"bg-orange-50",shadow:"shadow-orange-100/50",glow:"shadow-[0_8px_30px_rgba(249,115,22,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(249,115,22,0.25)]"},{icon:O,value:ee(B.totalSize),label:"فضا",gradient:"from-indigo-500 to-indigo-600",bg:"bg-indigo-50",shadow:"shadow-indigo-100/50",glow:"shadow-[0_8px_30px_rgba(99,102,241,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(99,102,241,0.25)]"},{icon:je,value:`${(B.totalSamples/1e3).toFixed(0)}K`,label:"نمونه",gradient:"from-pink-500 to-pink-600",bg:"bg-pink-50",shadow:"shadow-pink-100/50",glow:"shadow-[0_8px_30px_rgba(236,72,153,0.12)]",hover:"hover:shadow-[0_20px_40px_rgba(236,72,153,0.25)]"}].map((s,t)=>{const l=s.icon;return e.jsxs("div",{className:`relative group bg-white rounded-2xl p-5 transition-all duration-500 cursor-pointer border border-gray-100
                  ${s.glow} ${s.hover} hover:-translate-y-2 hover:scale-[1.02]`,children:[e.jsx("div",{className:`absolute inset-0 rounded-2xl ${s.bg} opacity-40 group-hover:opacity-60 transition-opacity duration-500`}),e.jsxs("div",{className:"relative z-10 text-center space-y-3",children:[e.jsx("div",{className:`w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br ${s.gradient} 
                    flex items-center justify-center shadow-lg transform transition-transform duration-500
                    group-hover:scale-110 group-hover:rotate-3`,children:e.jsx(l,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:`text-3xl font-bold bg-gradient-to-br ${s.gradient} bg-clip-text text-transparent
                    transform transition-all duration-500 group-hover:scale-110`,children:s.value}),e.jsx("div",{className:`text-sm font-medium ${a?"text-gray-400":"text-gray-600"} 
                    transition-colors duration-500 group-hover:text-gray-900`,children:s.label})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})})]},t)})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Cs,{placeholder:"جستجو در دیتاست‌ها... (نام، توضیحات، ارائه‌دهنده، زبان، فرمت)",value:h,onChange:s=>p(s.target.value),icon:e.jsx(Oe,{className:"w-5 h-5"}),suggestions:me,onSuggestionClick:s=>{p(s)}})}),e.jsxs(S,{variant:"primary",size:"md",icon:e.jsx(ke,{className:"w-5 h-5"}),onClick:()=>V(!T),className:"shadow-lg shadow-blue-200 hover:shadow-xl hover:shadow-blue-300",children:["مدیریت دانلودها (",I.length,")"]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:ne.map(s=>{const t=s.icon,l=N===s.id,i={all:"shadow-purple-200 hover:shadow-purple-300",tts:"shadow-blue-200 hover:shadow-blue-300",asr:"shadow-green-200 hover:shadow-green-300",translation:"shadow-red-200 hover:shadow-red-300",keyword:"shadow-yellow-200 hover:shadow-yellow-300",multilingual:"shadow-pink-200 hover:shadow-pink-300"};return e.jsxs("button",{onClick:()=>z(s.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold whitespace-nowrap transition-all text-sm ${l?`bg-blue-600 text-white shadow-lg ${i[s.id]}`:a?"bg-gray-800 text-gray-300 hover:bg-gray-700 shadow-md":`bg-white text-gray-700 hover:shadow-lg border border-gray-200 ${i[s.id]}`}`,children:[e.jsx(t,{className:"w-4 h-4"}),s.name]},s.id)})}),T&&e.jsx(J,{variant:"elevated",className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[e.jsx(ye,{className:"w-5 h-5"}),"صف دانلود"]}),e.jsx(S,{variant:"ghost",size:"sm",icon:e.jsx(ie,{className:"w-4 h-4"}),onClick:()=>V(!1),children:"بستن"})]}),I.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(ye,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:a?"text-gray-400":"text-gray-500",children:"هیچ دانلودی در صف نیست"})]}):e.jsx("div",{className:"space-y-2",children:I.map(s=>{const t=d.find(l=>l.id===s.datasetId);return t?e.jsx(J,{variant:"default",className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-semibold text-sm ${a?"text-white":"text-gray-900"}`,children:t.name}),e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:t.size})]}),e.jsx(Ae,{variant:s.status==="completed"?"success":s.status==="failed"?"danger":s.status==="downloading"?"primary":s.status==="paused"?"warning":"default",children:s.status==="completed"?"تکمیل":s.status==="failed"?"خطا":s.status==="downloading"?"دانلود":s.status==="paused"?"متوقف":"صف"})]}),t.status==="downloading"&&t.downloadProgress!==void 0&&e.jsx(Ss,{progress:t.downloadProgress,downloaded:ee(t.downloadedBytes||0),total:t.size,speed:t.downloadSpeed,timeRemaining:t.timeRemaining}),e.jsxs("div",{className:"flex gap-2",children:[t.status==="downloading"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"warning",size:"sm",icon:e.jsx(Fe,{className:"w-3 h-3"}),onClick:()=>he(t),children:"توقف"}),e.jsx(S,{variant:"danger",size:"sm",icon:e.jsx(ie,{className:"w-3 h-3"}),onClick:()=>r(t),children:"لغو"})]}),t.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"primary",size:"sm",icon:e.jsx(Me,{className:"w-3 h-3"}),onClick:()=>Y(t),children:"ادامه"}),e.jsx(S,{variant:"danger",size:"sm",icon:e.jsx(ie,{className:"w-3 h-3"}),onClick:()=>r(t),children:"لغو"})]}),s.status==="completed"&&e.jsx(Ae,{variant:"success",icon:e.jsx(Z,{className:"w-3 h-3"}),children:"تکمیل شد"}),s.status==="failed"&&e.jsx(S,{variant:"primary",size:"sm",icon:e.jsx(H,{className:"w-3 h-3"}),onClick:()=>G(t),children:"تلاش مجدد"})]})]})},s.id):null})})]})}),e.jsx("section",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:d.some(s=>s.resolveResult===void 0)?e.jsx("div",{className:"col-span-full grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"rounded-xl border border-black/5 bg-[color:var(--card)] p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 w-2/3 bg-black/10 rounded mb-2"}),e.jsx("div",{className:"h-3 w-full bg-black/10 rounded mb-2"}),e.jsx("div",{className:"h-3 w-5/6 bg-black/10 rounded mb-4"}),e.jsx("div",{className:"h-2 w-full bg-black/10 rounded"})]},t))}):oe.map(s=>{const t=$.has(s.id);return e.jsx("article",{className:"group rounded-xl border border-black/5 bg-[color:var(--card)] shadow-sm hover:shadow-md transition-shadow rtl-card",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"font-semibold text-[color:var(--text)] truncate persian-font persian-text",children:s.name}),e.jsx("p",{className:"text-sm text-[color:var(--muted)] line-clamp-2 persian-font persian-text mt-1",children:s.description}),e.jsx("p",{className:"text-[11px] text-[color:var(--muted)] mt-1 break-all font-mono",children:s.resolveResult?.finalUrl??s.downloadUrl})]}),s.status==="installed"&&e.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-[color:var(--ok)]/15 text-[color:var(--ok)] border border-[color:var(--ok)]/20",children:"Installed"}),s.status==="broken"&&e.jsx("span",{className:"text-[11px] px-2 py-1 rounded-full bg-[color:var(--warn)]/15 text-[color:var(--warn)] border border-[color:var(--warn)]/20",children:"Broken link"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-[color:var(--muted)]",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 whitespace-nowrap",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[color:var(--brand)]/70"}),s.sizeBytes?`${(s.sizeBytes/1048576).toFixed(1)} MB`:s.size??"—"]}),e.jsx("span",{className:"opacity-40",children:"•"}),e.jsxs("span",{className:"truncate",children:["Format: ",s.format??"—"]})]}),t&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:a?"text-gray-400":"text-gray-600",children:["مدت: ",s.duration]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3 text-gray-400"}),e.jsxs("span",{className:a?"text-gray-400":"text-gray-600",children:["لایسنس: ",s.license]})]})]}),s.githubUrl&&e.jsxs("a",{href:s.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 text-xs font-medium hover:underline",children:[e.jsx(K,{className:"w-3 h-3"}),"مشاهده منبع"]}),s.alternateUrls&&s.alternateUrls.length>0&&e.jsxs("div",{className:`rounded-lg p-2 ${a?"bg-gray-800":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-semibold mb-1 ${a?"text-gray-300":"text-gray-700"}`,children:"لینک‌های جایگزین:"}),e.jsx("div",{className:"space-y-0.5",children:s.alternateUrls.map((l,i)=>e.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 hover:underline truncate",children:l.split("/").pop()},i))})]})]}),s.status==="downloading"&&e.jsxs("div",{className:"mt-2 space-y-1.5",role:"group","aria-label":"Download progress",children:[e.jsx("div",{className:"w-full h-2 rounded-full bg-black/10 overflow-hidden ring-1 ring-black/5",children:e.jsx("div",{className:"h-2 bg-[color:var(--brand)] transition-[width] duration-200",style:{width:`${Math.max(0,Math.min(100,s.downloadProgress||0))}%`},role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number((s.downloadProgress||0).toFixed(1))})}),e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-[color:var(--muted)]",children:[e.jsx("span",{children:s.downloadProgress?`${s.downloadProgress.toFixed(1)}%`:"در حال دریافت…"}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:(s.downloadedBytes||0)>0?ee(s.downloadedBytes):"0 B"}),e.jsx("span",{className:"opacity-40",children:"/"}),e.jsx("span",{children:s.sizeBytes?ee(s.sizeBytes):s.size??"—"}),s.downloadSpeed?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-40",children:"•"}),e.jsxs("span",{children:[ee(s.downloadSpeed),"/s"]})]}):null,s.timeRemaining?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-40",children:"•"}),e.jsxs("span",{children:[Math.ceil(s.timeRemaining),"s left"]})]}):null]})]})]}),s.status==="paused"&&e.jsx("div",{className:`rounded-lg p-3 border-2 ${a?"bg-yellow-900 border-yellow-700":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold text-sm ${a?"text-yellow-400":"text-yellow-700"}`,children:"⏸️ دانلود متوقف شد"}),e.jsxs("p",{className:`text-xs ${a?"text-yellow-500":"text-yellow-600"}`,children:[s.downloadProgress?.toFixed(1),"% دانلود شده"]})]})]})}),s.status==="installed"&&e.jsx("div",{className:`rounded-lg p-3 border-2 ${a?"bg-green-900 border-green-700":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold text-sm ${a?"text-green-400":"text-green-700"}`,children:"✅ دانلود موفق"}),s.localPath&&e.jsx("code",{className:`block text-xs px-2 py-1 rounded mt-1 ${a?"bg-gray-800 border border-green-700":"bg-white border border-green-200"}`,children:s.localPath})]})]})}),s.status==="error"&&e.jsx("div",{className:`rounded-lg p-3 border-2 ${a?"bg-red-900 border-red-700":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-red-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-semibold ${a?"text-red-400":"text-red-700"}`,children:"❌ خطا در دانلود"}),A[s.id]&&e.jsx("p",{className:`text-xs mt-1 ${a?"text-red-500":"text-red-600"}`,children:A[s.id]}),E[s.id]&&e.jsxs("p",{className:`text-xs mt-1 ${a?"text-red-400":"text-red-500"}`,children:["تلاش ",E[s.id]," از 3"]})]})]})}),s.status==="broken"&&e.jsxs("div",{className:`rounded-lg p-3 border-2 ${a?"bg-orange-900 border-orange-700":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),e.jsx("p",{className:`text-sm font-semibold ${a?"text-orange-400":"text-orange-700"}`,children:"🔗 لینک معیوب"})]}),e.jsx("p",{className:`text-xs mt-1 ${a?"text-orange-500":"text-orange-600"}`,children:"این لینک در دسترس نیست یا خطا دارد"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.status!=="downloading"&&s.status!=="broken"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>G(s),className:"inline-flex items-center justify-center px-3.5 py-2 rounded-md bg-[color:var(--brand)] text-white hover:bg-[color:var(--brand)]/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--ring)]","aria-label":`Download ${s.name}`,children:[e.jsx(te,{className:"w-4 h-4 ml-1"}),"دانلود"]}),e.jsxs("a",{href:s.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-3.5 py-2 rounded-md border border-black/10 hover:bg-black/5 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--ring)]",children:[e.jsx(K,{className:"w-4 h-4 ml-1"}),"دانلود مستقیم"]})]}),s.status==="downloading"&&e.jsx("button",{onClick:()=>r(s),className:"inline-flex items-center justify-center px-3 py-2 rounded-md bg-[color:var(--danger)] text-white hover:bg-[color:var(--danger)]/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--ring)]",children:"لغو"}),s.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"primary",size:"sm",icon:e.jsx(Me,{className:"w-4 h-4"}),onClick:()=>Y(s),className:"flex-1",children:"ادامه"}),e.jsx(S,{variant:"danger",size:"sm",icon:e.jsx(ie,{className:"w-4 h-4"}),onClick:()=>r(s),children:"لغو"})]}),s.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"primary",size:"sm",icon:e.jsx(H,{className:"w-4 h-4"}),onClick:()=>{n(l=>l.map(i=>i.id===s.id?{...i,status:"available",downloadProgress:0,downloadedBytes:0}:i)),G(s)},className:"flex-1",children:"تلاش مجدد"}),e.jsx(S,{variant:"outline",size:"sm",icon:e.jsx(K,{className:"w-4 h-4"}),onClick:()=>window.open(s.githubUrl||s.downloadUrl,"_blank"),children:"دانلود دستی"}),s.alternateUrls&&s.alternateUrls.length>0&&e.jsx(S,{variant:"warning",size:"sm",icon:e.jsx(de,{className:"w-4 h-4"}),onClick:()=>{const l=s.alternateUrls[0];n(i=>i.map(c=>c.id===s.id?{...c,downloadUrl:l,status:"available"}:c)),G({...s,downloadUrl:l})},children:"لینک جایگزین"})]}),s.status==="broken"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{n(l=>l.map(i=>i.id===s.id?{...i,status:"available"}:i)),Ee(s.downloadUrl).then(l=>{n(i=>i.map(c=>c.id===s.id?{...c,resolveResult:l,status:l.ok?"available":"broken"}:c))}).catch(()=>{n(l=>l.map(i=>i.id===s.id?{...i,status:"broken"}:i))})},className:"inline-flex items-center justify-center px-3 py-2 rounded-md bg-[color:var(--warn)] text-white hover:bg-[color:var(--warn)]/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--ring)]",children:[e.jsx(H,{className:"w-4 h-4 ml-1"}),"بررسی مجدد"]}),e.jsxs("a",{href:s.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-3 py-2 rounded-md border border-black/10 hover:bg-black/5 focus:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--ring)]",children:[e.jsx(K,{className:"w-4 h-4 ml-1"}),"تلاش دستی"]})]}),s.status==="installed"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"primary",size:"sm",icon:e.jsx(ns,{className:"w-4 h-4"}),onClick:()=>alert(`مسیر: ${s.localPath}

فایل در Downloads ذخیره شد`),className:"flex-1",children:"مسیر"}),e.jsx(S,{variant:"danger",size:"sm",icon:e.jsx(os,{className:"w-4 h-4"}),onClick:()=>v(s),children:"حذف"})]}),e.jsx("button",{onClick:()=>y(s.id),className:`px-3 py-1.5 rounded-lg transition-colors ${a?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:t?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})})]})]})},s.id)})}),oe.length===0&&e.jsxs(J,{variant:"elevated",className:"text-center py-12",children:[e.jsx(_,{className:"w-16 h-16 mx-auto mb-3 text-gray-300"}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${a?"text-white":"text-gray-900"}`,children:"دیتاستی یافت نشد"}),e.jsx("p",{className:a?"text-gray-400":"text-gray-600",children:"لطفاً فیلترها را تغییر دهید"})]}),e.jsx(J,{variant:"elevated",className:`${a?"bg-green-800 border-green-700":"bg-green-50 border-green-200"} border-2 overflow-hidden`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:`text-lg font-bold ${a?"text-white":"text-gray-900"}`,children:"تست دانلود"})]}),e.jsx("p",{className:`text-sm mb-3 ${a?"text-green-200":"text-green-800"}`,children:"برای تست عملکرد دانلود، روی دکمه زیر کلیک کنید:"}),e.jsxs("button",{onClick:()=>{const s="https://httpbin.org/bytes/1024",t=document.createElement("a");t.href=s,t.download="test-download.bin",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),alert("✅ تست دانلود موفق! اگر فایل دانلود شد، سیستم کار می‌کند.")},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"تست دانلود (1KB)"]})]})}),e.jsxs(J,{variant:"elevated",className:`${a?"bg-gray-800 border-gray-700":"bg-blue-50 border-blue-200"} border-2 overflow-hidden`,children:[e.jsxs("button",{onClick:()=>k(!o),className:"w-full p-4 flex items-center justify-between hover:bg-opacity-80 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:`text-lg font-bold ${a?"text-white":"text-gray-900"}`,children:"راهنمای استفاده"})]}),o?e.jsx(ve,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"})]}),o&&e.jsxs("div",{className:"p-6 pt-0 space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:`font-semibold text-sm flex items-center gap-1 ${a?"text-gray-200":"text-gray-900"}`,children:[e.jsx(Z,{className:"w-4 h-4 text-green-600"}),"نحوه دانلود"]}),e.jsxs("ul",{className:`space-y-1 text-xs pr-5 ${a?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"●"}),e.jsx("span",{children:'روی دکمه "دانلود" کلیک کنید'})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"●"}),e.jsx("span",{children:"پیشرفت با سرعت نمایش داده می‌شود"})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"●"}),e.jsx("span",{children:"می‌توانید متوقف و ادامه دهید"})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"●"}),e.jsx("span",{children:"فایل در Downloads ذخیره می‌شود"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:`font-semibold text-sm flex items-center gap-1 ${a?"text-gray-200":"text-gray-900"}`,children:[e.jsx(De,{className:"w-4 h-4 text-purple-600"}),"مدیریت دانلودها"]}),e.jsxs("ul",{className:`space-y-1 text-xs pr-5 ${a?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-purple-600",children:"●"}),e.jsxs("span",{children:[e.jsx("strong",{children:"توقف:"})," متوقف موقت"]})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-purple-600",children:"●"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ادامه:"})," از همان نقطه"]})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-purple-600",children:"●"}),e.jsxs("span",{children:[e.jsx("strong",{children:"لغو:"})," لغو کامل"]})]}),e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-purple-600",children:"●"}),e.jsxs("span",{children:[e.jsx("strong",{children:"تلاش مجدد:"})," در صورت خطا"]})]})]})]})]}),e.jsx("div",{className:`rounded-lg p-3 border-2 ${a?"bg-yellow-900 border-yellow-700":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold text-sm ${a?"text-yellow-400":"text-yellow-900"}`,children:"⚠️ توجه"}),e.jsx("p",{className:`text-xs ${a?"text-yellow-500":"text-yellow-800"}`,children:"فایل‌ها بزرگ هستند. اتصال پایدار لازم است. در صورت قطع، می‌توانید ادامه دهید."})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:"https://huggingface.co/datasets",target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 px-3 py-1.5 border-2 rounded-lg text-xs font-medium transition-all ${a?"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700":"bg-white border-gray-300 text-gray-700 hover:shadow-md"}`,children:[e.jsx(K,{className:"w-3 h-3"}),"Hugging Face"]}),e.jsxs("a",{href:"https://github.com/topics/persian-speech",target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 px-3 py-1.5 border-2 rounded-lg text-xs font-medium transition-all ${a?"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700":"bg-white border-gray-300 text-gray-700 hover:shadow-md"}`,children:[e.jsx(K,{className:"w-3 h-3"}),"GitHub"]})]})]})]}),e.jsxs(J,{variant:"elevated",className:`${a?"bg-gray-800 border-gray-700":""} overflow-hidden`,children:[e.jsxs("button",{onClick:()=>R(!C),className:"w-full p-4 flex items-center justify-between hover:bg-opacity-80 transition-all",children:[e.jsxs("h3",{className:`text-lg font-bold flex items-center gap-2 ${a?"text-white":"text-gray-900"}`,children:[e.jsx(is,{className:"w-5 h-5"}),"جزئیات فنی"]}),C?e.jsx(ve,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"})]}),C&&e.jsxs("div",{className:"p-6 pt-0 space-y-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:[{title:"🎯 ASR",desc:"تشخیص گفتار با Whisper، Wav2Vec2",color:"blue"},{title:"🎤 TTS",desc:"تولید گفتار با Tacotron2، VITS",color:"green"},{title:"🌍 Translation",desc:"ترجمه گفتار به گفتار",color:"purple"}].map((s,t)=>e.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("h4",{className:`font-semibold text-sm mb-1 ${a?"text-white":"text-gray-900"}`,children:s.title}),e.jsx("p",{className:`text-xs ${a?"text-gray-300":"text-gray-600"}`,children:s.desc})]},t))}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("h4",{className:`font-semibold text-sm mb-2 ${a?"text-white":"text-gray-900"}`,children:"📚 کتابخانه‌های پیشنهادی:"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2 text-xs",children:["pip install transformers","pip install datasets","pip install librosa soundfile","pip install torch torchaudio"].map((s,t)=>e.jsx("code",{className:`block px-3 py-1.5 rounded border ${a?"bg-gray-800 border-gray-600 text-gray-300":"bg-white border-gray-300"}`,children:s},t))})]}),e.jsx("div",{className:`rounded-lg p-3 border-2 ${a?"bg-indigo-900 border-indigo-700":"bg-indigo-50 border-indigo-200"}`,children:e.jsxs("p",{className:`text-xs ${a?"text-indigo-300":"text-indigo-900"}`,children:[e.jsx("strong",{children:"💡 نکته:"})," پس از دانلود، فایل‌ها را Extract کنید و با ",e.jsx("code",{className:`px-1 py-0.5 rounded ${a?"bg-gray-800":"bg-white"}`,children:"datasets"})," یا ",e.jsx("code",{className:`px-1 py-0.5 rounded ${a?"bg-gray-800":"bg-white"}`,children:"pandas"})," بارگذاری کنید."]})})]})]})]})})]})}const Ge=[{kind:"github",name:"GitHub",description:"اتصال به مخازن GitHub برای استخراج کد و مستندات",icon:cs,color:"from-gray-500 to-gray-600"},{kind:"gdrive",name:"Google Drive",description:"دسترسی به فایل‌های Google Drive",icon:O,color:"from-blue-500 to-blue-600"},{kind:"web",name:"وب‌سایت",description:"کرال کردن محتوای وب‌سایت‌ها",icon:de,color:"from-green-500 to-green-600"},{kind:"huggingface",name:"Hugging Face",description:"دسترسی به دیتاست‌های Hugging Face",icon:_,color:"from-yellow-500 to-yellow-600"},{kind:"upload",name:"آپلود فایل",description:"آپلود مستقیم فایل‌های محلی",icon:ds,color:"from-purple-500 to-purple-600"}];function Ts(){const[a,x]=m.useState([]),[g,d]=m.useState(""),[n,h]=m.useState(!1),[p,N]=m.useState(!0);m.useEffect(()=>{z()},[]);const z=async()=>{N(!0);try{const o=await ws.getDataSources();o.success&&o.data&&x(o.data)}catch(o){console.error("Failed to load data sources:",o)}finally{N(!1)}},$=a.filter(o=>o.name.toLowerCase().includes(g.toLowerCase())||o.kind.toLowerCase().includes(g.toLowerCase())),D=o=>{be.success(`اتصال به ${o} در حال راه‌اندازی...`),h(!1)},I=o=>{be.success("همگام‌سازی شروع شد"),x(k=>k.map(C=>C.id===o?{...C,lastSync:new Date().toISOString()}:C))},u=o=>{x(k=>k.filter(C=>C.id!==o)),be.success("منبع داده قطع شد")},T=o=>{switch(o){case"active":return e.jsx(P,{variant:"success",children:"فعال"});case"inactive":return e.jsx(P,{variant:"secondary",children:"غیرفعال"});case"error":return e.jsx(P,{variant:"danger",children:"خطا"});default:return e.jsx(P,{variant:"secondary",children:"نامشخص"})}},V=o=>o?new Date(o).toLocaleDateString("fa-IR"):"هرگز";return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-[color:var(--c-text)]",children:"منابع داده"}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)] mt-1.5",children:"مدیریت و اتصال منابع داده خارجی برای آموزش مدل"})]}),e.jsx(j,{variant:"primary",icon:e.jsx(Ie,{className:"w-5 h-5"}),onClick:()=>h(!0),children:"افزودن منبع"})]}),e.jsx("div",{className:"max-w-md",children:e.jsx(He,{placeholder:"جستجو در منابع داده...",value:g,onChange:o=>d(o.target.value),icon:e.jsx(_,{className:"w-5 h-5"})})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs(U,{className:"w-full max-w-2xl mx-4",children:[e.jsx(Re,{children:e.jsx("h2",{className:"text-xl font-semibold text-[color:var(--c-text)]",children:"افزودن منبع داده"})}),e.jsxs(re,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Ge.map(o=>{const k=o.icon;return e.jsx(U,{variant:"outline",className:"cursor-pointer hover:shadow-[var(--shadow-2)] transition-all duration-200 group",onClick:()=>D(o.kind),children:e.jsxs(re,{className:"p-6 text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-4 rounded-xl bg-gradient-to-br ${o.color} flex items-center justify-center group-hover:scale-110 transition-transform duration-200`,children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-[color:var(--c-text)] mb-2",children:o.name}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:o.description})]})},o.kind)})}),e.jsx("div",{className:"flex justify-end gap-2 mt-6",children:e.jsx(j,{variant:"ghost",onClick:()=>h(!1),children:"لغو"})})]})]})}),p?e.jsx(U,{variant:"outline",className:"text-center py-12",children:e.jsxs(re,{children:[e.jsx(H,{className:"w-16 h-16 mx-auto mb-4 text-[color:var(--c-text-muted)] animate-spin"}),e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)] mb-2",children:"در حال بارگذاری..."})]})}):$.length===0?e.jsx(U,{variant:"outline",className:"text-center py-12",children:e.jsxs(re,{children:[e.jsx(_,{className:"w-16 h-16 mx-auto mb-4 text-[color:var(--c-text-muted)]"}),e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)] mb-2",children:a.length===0?"هیچ منبع داده‌ای پیکربندی نشده":"هیچ منبع داده‌ای یافت نشد"}),e.jsx("p",{className:"text-[color:var(--c-text-muted)] mb-6",children:a.length===0?"برای شروع، یک منبع داده جدید اضافه کنید یا از صفحه دانلودها داده‌های واقعی دانلود کنید":"جستجوی شما نتیجه‌ای نداشت"}),a.length===0&&e.jsx(j,{variant:"primary",icon:e.jsx(Ie,{className:"w-5 h-5"}),onClick:()=>h(!0),children:"افزودن منبع"})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:$.map(o=>{const k=Ge.find(R=>R.kind===o.kind),C=k?.icon||_;return e.jsxs(U,{variant:"elevated",className:"group hover:shadow-[var(--shadow-2)] transition-all duration-300",children:[e.jsx(Re,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${k?.color||"from-gray-500 to-gray-600"} flex items-center justify-center`,children:e.jsx(C,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[color:var(--c-text)]",children:o.name}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:k?.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T(o.status),e.jsx(j,{variant:"ghost",size:"sm",icon:e.jsx(xs,{className:"w-4 h-4"})})]})]})}),e.jsxs(re,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[color:var(--c-text-muted)]",children:"آخرین همگام‌سازی:"}),e.jsx("span",{className:"text-[color:var(--c-text)]",children:V(o.lastSync)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[color:var(--c-text-muted)]",children:"تعداد رکوردها:"}),e.jsx("span",{className:"text-[color:var(--c-text)]",children:o.recordsCount?.toLocaleString("fa-IR")||0})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[o.connected?e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"ghost",size:"sm",icon:e.jsx(H,{className:"w-4 h-4"}),onClick:()=>I(o.id),className:"flex-1",children:"همگام‌سازی"}),e.jsx(j,{variant:"ghost",size:"sm",icon:e.jsx(ke,{className:"w-4 h-4"}),className:"flex-1",children:"تنظیمات"})]}):e.jsx(j,{variant:"primary",size:"sm",icon:e.jsx(Z,{className:"w-4 h-4"}),onClick:()=>D(o.kind),className:"flex-1",children:"اتصال"}),e.jsx(j,{variant:"ghost",size:"sm",icon:e.jsx(xe,{className:"w-4 h-4"}),onClick:()=>u(o.id),className:"text-[color:var(--c-danger)] hover:text-[color:var(--c-danger)] hover:bg-[color:var(--c-danger)]/10",children:"قطع"})]})]})]},o.id)})})]})}function Ys(){const[a,x]=m.useState(!1),d=[{id:"refresh",icon:"refresh",label:"به‌روزرسانی",onClick:async()=>{x(!0),await new Promise(n=>setTimeout(n,1e3)),x(!1)},disabled:a},{id:"import",icon:"upload",label:"وارد کردن مدل",onClick:()=>console.log("Import model"),variant:"primary"},{id:"settings",icon:"settings",label:"تنظیمات",onClick:()=>console.log("Settings")}];return e.jsxs(js.div,{...ps,className:"container-padding",children:[e.jsxs("div",{className:"flex-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-h1 mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex-center",children:e.jsx(ce.package,{className:"w-6 h-6 text-primary"})}),"مرکز مدل‌ها"]}),e.jsx("p",{className:"text-body text-muted-foreground",children:"مدیریت، دانلود و استقرار مدل‌های هوش مصنوعی"})]}),e.jsx(ms,{actions:d})]}),e.jsxs(hs,{defaultValue:"installed",children:[e.jsxs(gs,{className:"mb-6",children:[e.jsxs(fe,{value:"installed",children:[e.jsx(ce.hardDrive,{className:"w-4 h-4 mr-2"}),"مدل‌های نصب شده"]}),e.jsxs(fe,{value:"catalog",children:[e.jsx(ce.cloud,{className:"w-4 h-4 mr-2"}),"کاتالوگ دانلود"]}),e.jsxs(fe,{value:"sources",children:[e.jsx(ce.database,{className:"w-4 h-4 mr-2"}),"منابع خارجی"]})]}),e.jsx(we,{value:"installed",children:e.jsx(ys,{})}),e.jsx(we,{value:"catalog",children:e.jsx(Us,{})}),e.jsx(we,{value:"sources",children:e.jsx(Ts,{})})]})]})}export{Ys as default};
