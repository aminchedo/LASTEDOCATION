import{c as $,Z as y,C as B,M as L,D as k,a as C,A as R,j as e,B as N,P as T,b as p,d as g,T as A,e as U,f as S,g as F}from"./index-Br5p3c61.js";import{b as c,L as i}from"./react-vendor-CHIk2tMd.js";import{B as I}from"./badge-DlDO3Hl1.js";import{a as H}from"./api.service-CxHt9VSM.js";import{u as J,T as q}from"./useTraining-Dp2d4kx-.js";import{C as z}from"./clock-BXxtL5XS.js";import{C as E}from"./circle-check-big-BW1H2Pf2.js";import{S as O}from"./sparkles-BNoBMool.js";import"./api-BM4dxxsF.js";import"./auth.service-DTA6mi50.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=$("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function Z(){const[l,f]=c.useState([]),[d,v]=c.useState(!1),[h,m]=c.useState(null),t=c.useCallback(async()=>{try{const a=await fetch("/api/download/jobs");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();if(o.ok&&o.jobs)f(o.jobs);else throw new Error(o.error||"Failed to fetch download jobs")}catch(s){console.error("Failed to fetch download jobs:",s),m(s.message)}},[]),x=c.useCallback(async(s,a,o="generic")=>{v(!0),m(null);try{const r=await fetch("/api/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:s,dest:a,kind:o})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();if(n.ok)return await t(),n.id;throw new Error(n.error||"Failed to start download")}catch(j){const r=j.message||"Failed to start download";throw m(r),new Error(r)}finally{v(!1)}},[t]),b=c.useCallback(async s=>{try{const o=await fetch(`/api/download/job?id=${s}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);await t()}catch(a){throw console.error("Failed to cancel download:",a),a}},[t]);return c.useEffect(()=>{t();const s=setInterval(t,2e3);return()=>clearInterval(s)},[t]),{jobs:l,loading:d,error:h,startDownload:x,cancelDownload:b,refreshJobs:t}}function se(){const[l,f]=c.useState(null),[d,v]=c.useState(!0),{jobs:h}=J(),{jobs:m}=Z();c.useEffect(()=>{t();const r=setInterval(t,1e4);return()=>clearInterval(r)},[]);const t=async()=>{try{const r=await H.getMetrics();r.success&&f(r.data)}catch(r){console.error("Failed to load metrics:",r)}finally{v(!1)}},x=h?.find(r=>r.status==="training"||r.status==="preparing"||r.status==="evaluating"),b=m?.filter(r=>r.status==="downloading")||[],s=h?.filter(r=>r.status==="completed"&&r.finishedAt&&new Date(r.finishedAt).toDateString()===new Date().toDateString()).length||0,a=[{label:"درخواست‌های کل",value:d?"...":l?.totalRequests||0,icon:y,change:l?.totalRequests>0?"+12%":"—",isPositive:!0,trend:[20,35,30,45,40,55,50]},{label:"زمان پاسخ میانگین",value:d?"...":`${Math.round(l?.avgResponseTimeMs||0)}ms`,icon:z,change:"-8%",isPositive:!0,trend:[80,75,70,72,68,65,60]},{label:"نرخ موفقیت",value:d?"...":`${Math.round(l?.successRate||100)}%`,icon:E,change:"+2%",isPositive:!0,trend:[95,96,97,96,98,97,99]},{label:"نرخ خطا",value:d?"...":`${l?.errorRate?.toFixed(1)||0}%`,icon:B,change:"-15%",isPositive:!0,trend:[5,4,3,4,2,2,1]}],o=[{icon:L,title:"چت هوش مصنوعی",description:"گفتگو با مدل‌های پیشرفته زبانی فارسی",href:"/chat",color:"from-blue-500 to-blue-600",iconBg:"bg-blue-500",count:l?.recentActivity?.length||0,countLabel:"فعالیت اخیر"},{icon:k,title:"مرکز مدل‌ها",description:"دانلود و مدیریت مدل‌ها و دیتاست‌ها",href:"/model-hub",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-500",count:m?.length||0,countLabel:"دانلود"},{icon:C,title:"استودیو آموزش",description:"آموزش و بهینه‌سازی مدل‌های زبانی",href:"/training-studio",color:"from-green-500 to-green-600",iconBg:"bg-green-500",count:h?.length||0,countLabel:"وظیفه آموزش"},{icon:y,title:"استودیو بهینه‌سازی",description:"تنظیم پارامترها، هرس و کوانتیزاسیون",href:"/optimization-studio",color:"from-purple-500 to-purple-600",iconBg:"bg-purple-500",count:0,countLabel:"بهینه‌سازی"},{icon:R,title:"مانیتورینگ",description:"نظارت زنده بر عملکرد سیستم",href:"/metrics",color:"from-orange-500 to-orange-600",iconBg:"bg-orange-500",count:l?.totalRequests||0,countLabel:"درخواست"}],j=({data:r})=>{const n=Math.max(...r),u=Math.min(...r),D=n-u||1;return e.jsx("svg",{className:"w-16 h-8",viewBox:"0 0 64 32",preserveAspectRatio:"none",children:e.jsx("polyline",{points:r.map((M,P)=>`${P/(r.length-1)*64},${32-(M-u)/D*28}`).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-[color:var(--c-primary)]"})})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 dark:from-gray-900 dark:via-blue-950/20 dark:to-purple-950/20",dir:"rtl",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(O,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[color:var(--c-text)]",children:"پلتفرم آموزش هوش مصنوعی"}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)] mt-1",children:"سیستم یکپارچه مدیریت، آموزش و نظارت بر مدل‌های زبانی فارسی"})]})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{to:"/chat",children:e.jsx(N,{variant:"primary",icon:e.jsx(T,{className:"w-4 h-4"}),children:"شروع چت"})})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(r=>{const n=r.icon,u=r.isPositive;return e.jsx(p,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] transition-all duration-300",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500/10 to-purple-500/10 flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-[color:var(--c-primary)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:r.label}),e.jsx("p",{className:"text-2xl font-bold text-[color:var(--c-text)] mt-1",children:r.value})]})]}),r.trend&&e.jsx(j,{data:r.trend})]}),r.change&&r.change!=="—"&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[u?e.jsx(A,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):e.jsx(q,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsx("span",{className:u?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:r.change}),e.jsx("span",{className:"text-[color:var(--c-text-muted)]",children:"نسبت به دیروز"})]})]})},r.label)})}),(x||b.length>0)&&e.jsx(p,{variant:"elevated",className:"bg-gradient-to-r from-blue-500/5 to-purple-500/5 border-blue-200 dark:border-blue-800",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"فعالیت‌های جاری"})]}),e.jsxs("div",{className:"space-y-3",children:[x&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[color:var(--c-bg)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[color:var(--c-text)]",children:x.name}),e.jsxs("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:["آموزش در حال اجرا • ",x.progress,"%"]})]})]}),e.jsx(i,{to:"/training-studio",children:e.jsx(N,{variant:"ghost",size:"sm",icon:e.jsx(w,{className:"w-4 h-4"}),children:"مشاهده"})})]}),b.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[color:var(--c-bg)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600 animate-bounce"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[color:var(--c-text)]",children:r.repoId.split("/").pop()}),e.jsxs("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:["در حال دانلود • ",r.progress,"%"]})]})]}),e.jsx(i,{to:"/model-hub",children:e.jsx(N,{variant:"ghost",size:"sm",icon:e.jsx(w,{className:"w-4 h-4"}),children:"مشاهده"})})]},r.id))]})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-[color:var(--c-text)] mb-4",children:"امکانات سیستم"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(r=>{const n=r.icon;return e.jsx(i,{to:r.href,children:e.jsxs(p,{variant:"elevated",className:"group hover:shadow-[var(--shadow-3)] hover:scale-[1.02] transition-all duration-300 cursor-pointer h-full",children:[e.jsxs(S,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${r.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:e.jsx(n,{className:"w-7 h-7 text-white"})}),r.count>0&&e.jsx(I,{variant:"secondary",children:r.count})]}),e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)] mb-2 group-hover:text-[color:var(--c-primary)] transition-colors",children:r.title}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)] leading-relaxed",children:r.description})]}),e.jsx(g,{className:"pt-0",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[color:var(--c-primary)] font-medium group-hover:gap-3 transition-all",children:[e.jsx("span",{children:"مشاهده"}),e.jsx(w,{className:"w-4 h-4"})]})})]})},r.title)})})]}),e.jsxs(p,{variant:"elevated",children:[e.jsx(S,{children:e.jsx("h3",{className:"text-lg font-semibold text-[color:var(--c-text)]",children:"دسترسی سریع"})}),e.jsxs(g,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(i,{to:"/model-hub",children:e.jsxs("div",{className:"p-4 rounded-lg border border-[color:var(--c-border)] hover:border-[color:var(--c-primary)] hover:bg-[color:var(--c-bg-secondary)] transition-all group cursor-pointer",children:[e.jsx(k,{className:"w-6 h-6 text-[color:var(--c-primary)] mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"font-medium text-[color:var(--c-text)] mb-1",children:"دانلود مدل جدید"}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-muted)]",children:"از Hugging Face"})]})}),e.jsx(i,{to:"/training-studio",children:e.jsxs("div",{className:"p-4 rounded-lg border border-[color:var(--c-border)] hover:border-[color:var(--c-primary)] hover:bg-[color:var(--c-bg-secondary)] transition-all group cursor-pointer",children:[e.jsx(T,{className:"w-6 h-6 text-[color:var(--c-primary)] mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"font-medium text-[color:var(--c-text)] mb-1",children:"شروع آموزش"}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-muted)]",children:"با مدل‌های دانلود شده"})]})}),e.jsx(i,{to:"/metrics",children:e.jsxs("div",{className:"p-4 rounded-lg border border-[color:var(--c-border)] hover:border-[color:var(--c-primary)] hover:bg-[color:var(--c-bg-secondary)] transition-all group cursor-pointer",children:[e.jsx(F,{className:"w-6 h-6 text-[color:var(--c-primary)] mb-2 group-hover:scale-110 transition-transform"}),e.jsx("p",{className:"font-medium text-[color:var(--c-text)] mb-1",children:"مشاهده آمار"}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-muted)]",children:"عملکرد سیستم"})]})})]})]}),s>0&&e.jsx(p,{variant:"elevated",className:"bg-gradient-to-r from-green-500/5 to-emerald-500/5",children:e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-[color:var(--c-text)]",children:["عالی! ",s," آموزش امروز تکمیل شد"]}),e.jsx("p",{className:"text-sm text-[color:var(--c-text-muted)]",children:"سیستم شما به خوبی در حال کار است"})]})]})})})]})})}export{se as HomePage,se as default};
