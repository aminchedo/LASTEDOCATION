import{j as e,m as j,S as u,B as o,t as g,s as f,b as i,H as N,G as d,x as y,a as w,a4 as v}from"./index-Br5p3c61.js";import{R as C,b as x}from"./react-vendor-CHIk2tMd.js";import{u as k}from"./useAILab-Cx0UAcfI.js";import"./api-BM4dxxsF.js";import"./auth.service-DTA6mi50.js";const m=C.forwardRef(({checked:t=!1,onChange:r,disabled:l=!1,className:s},c)=>{const n=()=>{!l&&r&&r(!t)};return e.jsx("button",{ref:c,type:"button",role:"switch","aria-checked":t,disabled:l,onClick:n,className:j("relative inline-flex h-6 w-11 items-center rounded-full transition-colors","focus:outline-none focus:ring-2 focus:ring-[color:var(--c-primary)] focus:ring-offset-2",t?"bg-[color:var(--c-primary)]":"bg-[color:var(--c-border)]",l&&"opacity-50 cursor-not-allowed",s),children:e.jsx("span",{className:j("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",t?"translate-x-6":"translate-x-1")})})});m.displayName="Switch";function D(){const{settings:t,updateSettings:r,refreshSettings:l}=k(),[s,c]=x.useState({baseDirectory:"",gpuEnabled:!1,maxConcurrentJobs:2,autoSaveCheckpoints:!0,checkpointInterval:10}),[n,h]=x.useState(!1);x.useEffect(()=>{t&&c(t)},[t]);const p=async()=>{h(!0);try{await r(s),v.success("تنظیمات با موفقیت ذخیره شد")}catch(a){console.error("Failed to save settings:",a)}finally{h(!1)}},b=()=>{v.info("انتخاب دایرکتوری در حال حاضر در مرورگر پشتیبانی نمی‌شود. لطفاً مسیر را به صورت دستی وارد کنید.")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 text-[color:var(--c-primary)]"}),"تنظیمات آزمایشگاه AI"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{variant:"secondary",icon:e.jsx(g,{className:"w-4 h-4"}),onClick:l,children:"بازخوانی"}),e.jsx(o,{variant:"primary",icon:e.jsx(f,{className:"w-4 h-4"}),onClick:p,loading:n,children:"ذخیره تنظیمات"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"تنظیمات ذخیره‌سازی"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"مسیر پایه ذخیره‌سازی"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{value:s.baseDirectory,onChange:a=>c({...s,baseDirectory:a.target.value}),placeholder:"/workspace/storage/ai-lab",className:"flex-1"}),e.jsx(o,{variant:"secondary",icon:e.jsx(y,{className:"w-4 h-4"}),onClick:b,children:"انتخاب"})]}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-secondary)] mt-1",children:"مسیری که مدل‌ها، دیتاست‌ها و چک‌پوینت‌ها در آن ذخیره می‌شوند"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"ذخیره خودکار چک‌پوینت‌ها"}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-secondary)] mt-1",children:"ذخیره خودکار وضعیت مدل در حین آموزش"})]}),e.jsx(m,{checked:s.autoSaveCheckpoints,onChange:a=>c({...s,autoSaveCheckpoints:a})})]}),s.autoSaveCheckpoints&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"فاصله ذخیره چک‌پوینت (Epoch)"}),e.jsx(d,{type:"number",value:s.checkpointInterval,onChange:a=>c({...s,checkpointInterval:parseInt(a.target.value)}),min:1,max:100}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-secondary)] mt-1",children:"هر چند Epoch یک چک‌پوینت ذخیره شود"})]})]})]}),e.jsxs(i,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"تنظیمات پردازش"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"استفاده از GPU"}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-secondary)] mt-1",children:s.gpuEnabled?"GPU فعال است و برای آموزش استفاده می‌شود":"فقط از CPU برای آموزش استفاده می‌شود"})]}),e.jsx(m,{checked:s.gpuEnabled,onChange:a=>c({...s,gpuEnabled:a})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"حداکثر کارهای همزمان"}),e.jsx(d,{type:"number",value:s.maxConcurrentJobs,onChange:a=>c({...s,maxConcurrentJobs:parseInt(a.target.value)}),min:1,max:10}),e.jsx("p",{className:"text-xs text-[color:var(--c-text-secondary)] mt-1",children:"تعداد کارهای آموزش که می‌توانند همزمان اجرا شوند"})]})]})]}),e.jsxs(i,{className:"p-6 lg:col-span-2",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"اطلاعات سیستم"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[color:var(--c-bg-elevated)] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-[color:var(--c-text-secondary)] mb-1",children:"وضعیت GPU"}),e.jsx("div",{className:"font-semibold",children:t?.gpuEnabled?"فعال (TensorFlow GPU)":"غیرفعال (CPU)"})]}),e.jsxs("div",{className:"bg-[color:var(--c-bg-elevated)] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-[color:var(--c-text-secondary)] mb-1",children:"نسخه TensorFlow.js"}),e.jsx("div",{className:"font-semibold",children:"4.x"})]}),e.jsxs("div",{className:"bg-[color:var(--c-bg-elevated)] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-[color:var(--c-text-secondary)] mb-1",children:"حافظه در دسترس"}),e.jsx("div",{className:"font-semibold",children:"نامحدود"})]})]})]})]})]})}export{D as AILabSettingsPage};
